<!	DOCTYPE html>
<head>

<META http-equiv="Content-Type" charset="UTF-8">

<title></title>
</head>
<body>

<div id="top"></div>


<h1 class="Capítulo"><a id="sec-5" href="filling-in-the-layout.html#top" class="heading"><span class="number">Capítulo 5</span> llenando el esquema</a></h1>


<p>En el proceso de tomar un breve tour de Ruby <a class="ref" href="rails-flavored-ruby.html#top">Capítulo&nbsp;4</a>, aprendimos acerca de incluir el stylesheet de la aplicación en la aplicación muestra&mdash;pero, como fue observado en la <a class="ref" href="rails-flavored-ruby.html#sec-css_revisited">Sección&nbsp;4.3.4</a>, este stylesheet esta actualmente vacía. En este Capítulo, cambiaremos esto incorporando el <em>Bootstrap</em> framework en nuestra aplicación, y después agregaremos nuestros propios estilos.<sup class="footnote" id="fnref-5_1"><a href="#fn-5_1">1</a></sup> También empezaremos a llenar el layout con enlaces  a las paginas (como Inicio y Acerca) que hemos creado hasta ahora (<a class="ref" href="filling-in-the-layout.html#sec-structure">Sección&nbsp;5.1</a>).
En el proceso, aprenderemos acerca de parciales, rutas Rails, la fuente de información ASSET, incluyendo una introducción a Sass (<a class="ref" href="filling-in-the-layout.html#sec-sass_and_the_asset_pipeline">Sección&nbsp;5.2</a>). También, refactorizaremos las pruebas del <a class="ref" href="static-pages.html#top">Capítulo&nbsp;3</a> usando las técnicas mas reciéntes de RSpsc. Terminaremos por tomar un paso importante hacia permitir que nuevos usuarios se puedan inscribir a nuestro sitio.
.</p>

<div class="label" id="sec-structure"></div>


<h2><a id="sec-5_1" href="filling-in-the-layout.html#sec-structure" class="heading"><span class="number">5.1</span> Agregando algo de estructura.</a></h2>


<p>El libro <em>Rails Tutorial</em> es un libro acerca de desarrollo web, no de diseño, pero seria deprimente trabajar en una aplicación que luciera como <em>completa</em> basura, así que en esta sección agregaremos algo de estructura al esquema y le daremos un mínimo de estilo con CSS. Aparte de usar algunas reglas CSS a la medida, usaremos <a href="http://twitter.github.com/bootstrap/">Bootstrap</a>, un armazón de diseño open-source de Twitter. También daremos a nuestro código algo de estilo, en cierta forma, usando <em>parciales</em> para organizar el esquema una vez que se encuentre un poco desordenado. 
</p>

<p>Al construir aplicaciones web, es frecuentemente util obtener un repaso de alto nivel del interface del usuario lo mas pronto posible. A lo largo del resto de este libro, incluiré <em>mockups (maquetas)</em> (en un contexto web comúnmente llamado <em>wireframes</em>), que son bocetos de como eventualmente luciria la aplicación.<sup class="footnote" id="fnref-5_2"><a href="#fn-5_2">2</a></sup>  En este Capítulo, principalmente desarrollaremos las paginas estáticas que se nos presentaron en la <a class="ref" href="static-pages.html#sec-static_pages">Sección&nbsp;3.1</a>, incluyendo el logotipo del sitio, un encabezado del navegador y el pie de pagina del sitio. Una maqueta para una de las paginas mas importantes, La pagina Inicial, aparece en la <a class="ref" href="filling-in-the-layout.html#fig-home_page_mockup">Figura&nbsp;5.1</a>. Puedes ver el resultado final en la <a class="ref" href="filling-in-the-layout.html#fig-site_with_footer">Figura&nbsp;5.7</a>. Podras notar que algunos detalles son diferentes&mdash;por ejemplo, agregaremos el logotipo Rails a la pagina--pero esta bien, porque la maqueta no tiene que ser exactamente igual.
</p>

<div class="label" id="fig-home_page_mockup"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/home_page_mockup_bootstrap.png" alt="home_page_mockup_bootstrap" /></span></div><div class="caption"><span class="header">Figura 5.1: </span><span class="description">Una maqueta de la pagina Inicial de la aplicación muestra 
&nbsp;<a href="http://railstutorial.org/images/Figuras/home_page_mockup_bootstrap-full.png">(Tamaño Total)</a></span></div></div>


<p>Como es usual, si usas Git para controlar la versión, es una buena hora de hacer una nueva rama:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b filling-in-layout
</pre></div>
</div>


<div class="label" id="sec-adding_to_the_layout"></div>


<h3><a id="sec-5_1_1" href="filling-in-the-layout.html#sec-adding_to_the_layout" class="heading"><span class="number">5.1.1</span> Navegacion del Sitio</a></h3>


<p>Como el primer paso para agregar enlaces y estilos a la aplicación muestra, actualizaremos el archivo de esquema del sitio <code>application.html.erb</code> (últimamente visto en el Listado 4.3 <a class="ref" href="rails-flavored-ruby.html#code-application_layout_full_title">Listado&nbsp;4.3</a>) con estructura HTML adicional. Esto incluye algunas divisiones racionales, algo de clases CSS, y el inicio de la navegación del sitio. El archivo completo esta en <a class="ref" href="filling-in-the-layout.html#code-layout_new_structure">Listado&nbsp;5.1</a>; las explicaciones de las difierentes piezas le siguen después. Si no quieres esperar para ver el resultado, se puede ver en la <a class="ref" href="filling-in-the-layout.html#fig-layout_no_logo_or_custom_css">Figura&nbsp;5.2</a>. (<em>Note:</em> Nota: No es (aun) muy satisfactorio.)
</p>

<div class="label" id="code-layout_new_structure"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.1.</span> <span class="description"> El esquema del sitio con estructura agregada. <br /> <code>app/views/layouts/application.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">full_title</span><span class="p">(</span><span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">))</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span> <span class="ss">media:</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
                                           <span class="s2">&quot;data-turbolinks-track&quot;</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span> <span class="s2">&quot;data-turbolinks-track&quot;</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">    &lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">    &lt;![endif]--&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-fixed-top navbar-inverse&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;navbar-inner&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
          <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;sample app&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;logo&quot;</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;nav&gt;</span>
            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;/nav&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Vamos a ver unos nuevos elementos en <a class="ref" href="filling-in-the-layout.html#code-layout_new_structure">Listado&nbsp;5.1</a> de principio a fin. Como se aludió brevemente en la <a class="ref" href="static-pages.html#sec-passing_title_tests">Sección&nbsp;3.3.2</a>, Rails usa HTML5 de preferencia (indicado por doctype <code>&lt;!DOCTYPE html&gt;</code>); ya que el standard de HTML5 is relativamente nuevo, algunos navegadores (especialmente versiones viejas de Internet Explorer) no trabajan con el, así que incluimos algo de código JavaScript (conocido como un &ldquo;<a href="http://code.google.com/p/html5shim/">HTML5 shim</a>&rdquo;) para resolver este problema:</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div>


<p>El sintaxis algo extraño</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
</pre></div>
</div>


<p>incluye la linea arriba mencionada si la versión de Microsoft Internet Explorer&nbsp;(IE) es menos de la&nbsp;9 (<code>si lt IE 9</code>). La sintaxis extraña <code>[si lt IE 9]</code> <em>no</em> es parte de Rails; en efecto es un <a href="http://en.wikipedia.org/wiki/Conditional_comment">comentario condicional</a> que funciona con los navegadores IE por esta situacion exacta. Y que bueno que asi, ya que significa que podemos incluir el shim de HTML5 <em>solo</em> para los navegadores IE de version menor a la 9, y asi no afecta a los navegadores Firefox, Chrome, y Safari.</p>

<p>La siguiente sección incluye un <code>encabezamiento</code> para el logotipo (texto plano) del sitio, un par de divisiones (usando la etiqueta <code>div</code>), y una lista de elementos con enlaces de navegación:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-fixed-top navbar-inverse&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;navbar-inner&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;sample app&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;logo&quot;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div>


<p>Aquí la etiqueta <code>header</code> indica elementos que deberian ir al principio de la pagina. Le hemos dado a la etiqueta <code>header</code> tres <em>clases CSS </em>,<sup class="footnote" id="fnref-5_3"><a href="#fn-5_3">3</a></sup> llamadas <code>navbar</code>, <code>navbar-fixed-top</code>, y <code>navbar-inverse</code>, separadas por espacios:
</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-fixed-top navbar-inverse&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>


<p>Todos los elementos HTML pueden ser asignados clases y <em>ids</em>; estas son solo designaciones, y son útiles para estilizar con CSS (<a class="ref" href="filling-in-the-layout.html#sec-custom_css">Sección&nbsp;5.1.2</a>). La principal diferencia entre clases y ids es que las clases se pueden usar múltiples veces en una pagina, pero ids solo se pueden usar una vez. En este caso, todas las clases navbar tienen un significado especial para el armazón bootstrap, el cual instalaremos y usaremos en la <a class="ref" href="filling-in-the-layout.html#sec-custom_css">Sección&nbsp;5.1.2</a>.</p>

<p>Dentro de la etiqueta <code>header</code>, podemos ver un par de etiquetas <code>div</code>:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;navbar-inner&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>


<p>La etiqueta <code>div</code> es una división genérica, no hace nada mas que dividir el documento en distintas partes. En estilo mas viejo de HTML, las etiquetas <code>div</code> son usadas para casi todas las divisiones del sitio, pero HTML5 agrega los elementos <code>header</code>, <code>nav</code>, and <code>Sección</code> para divisiones comunes para muchas aplicaciones. En este caso, cada <code>div</code> tiene también una clase de CSS. Como con las clases de la etiqueta header, estas clases tienen un significado especial para Bootstrap.</p>

<p>Después de las divs, encontramos algo de Ruby incrustado:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;sample app&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;logo&quot;</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>Esto usa el ayudante Rails <code>link_to</code> para crear enlaces (cual creamos directamente con la etiqueta ancla &nbsp;<code>a</code> en <a class="ref" href="static-pages.html#sec-passing_title_tests">Sección&nbsp;3.3.2</a>); el primer argumento para <code>link_to</code> es el texto del enlace, mientras que el segundo es el URL. Llenaremos el URL con named routes en la <em>named routes</em> in <a class="ref" href="filling-in-the-layout.html#sec-named_routes">Sección&nbsp;5.3.3</a>, pero por ahora usaremos <code>&rsquo;#&rsquo;</code> en vez del URL, como se usa comúnmente en diseño web. El tercer argumento es un hash de opciones, en este caso agregando el CSS&nbsp;id <code>logo</code> al enlace de la aplicación muestra. (Los otros 3 enlaces no tienen hash de opciones, cual esta bien porque es opcional.) Los ayudantes Rails a menudo manejan los hash de opciones de esta manera, dandonos la flexibilidad para agregar arbitrariamente opciones HTML sin nunca salir de Rails.</p>

<p>El segundo elemento dentro de divs es una lista de enlances de navegacion, usando la etiqueta <em>unordered list</em> (lista no-ordenada), <code>ul</code>, junto con la etiqueta <em>list item</em> <code>li</code>:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>La etiqueta <code>nav</code> , aunque formalmente es innecesaria aquí, comunica el propósito de los enlaces de navegación. Las etiquetas <code>nav</code> y las clases <code>pull-right</code> dentro de la etiqueta <code>ul</code>  tienen un significado especial para Bootstrap. Una vez que Rails haya procesado este esquema y evaluado el Ruby incrustado, la lista se ve asi:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Help<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Sign in<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>La parte final del esquema es una
<code>div</code> para el contenido principal:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
  <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>


<p>Como antes, la clase <code>container</code> tiene un significado especial para Bootstrap. Como aprendimos en la <a class="ref" href="static-pages.html#sec-layouts">Sección&nbsp;3.3.4</a>, el metodo <code>yield</code> inserta el contenido de cada pagina dentro del esquema del sitio.</p>

<p>Aparte del pie de pagina del sitio, el cual agregaremos en la <a class="ref" href="filling-in-the-layout.html#sec-partials">Sección&nbsp;5.1.3</a>, nuestro esquema esta ya completo, y podemos ver el resultado visitando nuestra pagina Inicial. Para tomar ventaja de los elementos de estilo que se aproximan, agregaremos elementos extras a la vista
 <code>home.html.erb</code> (<a class="ref" href="filling-in-the-layout.html#code-signup_button">Listado&nbsp;5.2</a>).</p>

<div class="label" id="code-signup_button"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.2.</span> <span class="description">La pagina Inicial con un enlace para enrolar un nuevo usuario al sitio. <br /> <code>app/views/static_pages/home.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;center hero-unit&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Welcome to the Sample App<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;h2&gt;</span>
    This is the home page for the
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Ruby on Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    sample application.
  <span class="nt">&lt;/h2&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign up now!&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="ss">class:</span> <span class="s2">&quot;btn btn-large btn-primary&quot;</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;rails.png&quot;</span><span class="p">,</span> <span class="ss">alt:</span> <span class="s2">&quot;Rails&quot;</span><span class="p">),</span> <span class="s1">&#39;http://rubyonrails.org/&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>En preparacion para agreagar usuarios a nuestro sitio en el <a class="ref" href="sign-up.html#top">Capítulo&nbsp;7</a>, el primer <code>link_to</code> crea un enlace con<code>&rsquo;#&rsquo;</code>falso de la forma</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-large btn-primary&quot;</span><span class="nt">&gt;</span>Sign up now!<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>


<p>En la etiqueta <code>div</code>, la clase <code>hero-unit</code> de CSS tiene un significado especial para Bootstrap, asi como las clases <code>btn</code>, <code>btn-large</code>, y <code>btn-primary</code> dentro del boton para enrolarse al sitio.
</p>

<p>El segundo <code>link_to</code> muestra el ayudante <code>image_tag</code>, el cual toma por argumentos el camino hacia una imagen y el hash de opciones opcional, en este caso poniendo el atributo de la etiqueta de la imagen <code>alt</code> usando símbolos. Para hacer esto mas claro, veamos el HTML que esta etiqueta produce:<sup class="footnote" id="fnref-5_4"><a href="#fn-5_4">4</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">&quot;Rails&quot;</span> <span class="na">src=</span><span class="s">&quot;/assets/rails.png&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>


<p>El atributo <code>alt</code> es lo que se demostrara si no hay imagen, y también es lo que se demostrara para lectores de pantallas usados para personas con problemas de visión. Aunque la gente es aveces descuidada de incluir el atributo alt, si no especificas el atributo al llamar <code>image_tag</code>, Rails solo usa el nombre del archivo de la imagen (sin la extension). Sin Embargo en este caso ajustamos el texto de alt para que &ldquo;Rails&rdquo; este escrito con mayuscula.</p> 

<p>En previas versiones de Rails el logotipo <code>rails.png</code> estaba incluido automaticamente con cada proyecto Rails, pero en las ultimas versiones no se genera como parte de <code>rails new</code>, asi que deberias bajarlo de la pagina principal de Ruby on Rails <a href="http://rubyonrails.org/images/rails.png">http://rubyonrails.org/images/rails.png</a> y ponerlo en el directorio <code>app/assets/images/</code>. (Es posible que tambien tengas que crear ese directorio, ya sea con <code>mkdir</code> o con un administrador de archivos grafico.) Ya que usamos el ayudante <code>image_tag</code> en el <a class="ref" href="filling-in-the-layout.html#code-signup_button">Listado&nbsp;5.2</a>, Rails automaticamente encontrara cualquier imagen en ese directorio usando el asset pipeline (<a class="ref" href="filling-in-the-layout.html#sec-sass_and_the_asset_pipeline">Sección&nbsp;5.2</a>).</p>Tamaño

<p>Ahora estamos listos para ver el fruto de nuestras labores (<a class="ref" href="filling-in-the-layout.html#fig-layout_no_logo_or_custom_css">Figura&nbsp;5.2</a>). Muy simple, no crees? Tal vez. Sin embargo hemos hecho un buen trabajo de dar nuestros elementos HTML, que son sensibles hacia las clases, cual nos pone en una gran posición de agregar estilo al sitio usando CSS.</p>

<div class="label" id="fig-layout_no_logo_or_custom_css"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/layout_no_logo_or_custom_css_bootstrap_rails_4.png" alt="layout_no_logo_or_custom_css_bootstrap_rails_4" /></span></div><div class="caption"><span class="header">Figura 5.2: </span><span class="description">La pagina Inicial(<a href="http://localhost:3000/static_pages/home">/static_pages/home</a>) sin ajustes CSS.&nbsp;<a href="http://railstutorial.org/images/Figuras/layout_no_logo_or_custom_css_bootstrap_rails_4-full.png">(Tamaño total)</a></span></div></div>




<div class="label" id="sec-custom_css"></div>


<h3><a id="sec-5_1_2" href="filling-in-the-layout.html#sec-custom_css" class="heading"><span class="number">5.1.2</span> Bootstrap y CSS a la medida.</a></h3>


<p>En la <a class="ref" href="filling-in-the-layout.html#sec-adding_to_the_layout">Sección&nbsp;5.1.1</a>, asociamos muchos de los elementos con clases CSS, el cual nos dio considerable flexibilidad en construir un esquema basado en CSS. Como fue notado en la <a class="ref" href="filling-in-the-layout.html#sec-adding_to_the_layout">Sección&nbsp;5.1.1</a>, muchas de estas clases son específicas hacia <a href="http://twitter.github.com/bootstrap/">Bootstrap</a>, un armazón de Twitter que hace fácil agregar algo de buen diseño web y elementos para el interface de usuario a una aplicación de HTML5. En esta sección, combinaremos Bootstrap con algunas reglas de CSS a la medida para agregar algo de estilo a la aplicación muestra.
</p>

<p>El primer paso es agregar Bootstrap, el cual en una aplicación Rails se puede hacer agregando la gema <tt>bootstrap-sass</tt> gem, como se muestra en el <a class="ref" href="filling-in-the-layout.html#code-bootstrap_sass">Listado&nbsp;5.3</a>. El armazón de Boostrap use el lenguage <a href="http://lesscss.org/">LESS CSS</a> nativamente para hacer hojas de estilo dinamicas, pero el Rails asset pipeline apoya el (muy familiar) lenguage Sass de preferencia (<a class="ref" href="filling-in-the-layout.html#sec-sass_and_the_asset_pipeline">Sección&nbsp;5.2</a>), asi que <tt>bootstrap-sass</tt> convierte LESS a Sass y hace todos los archivos de Bootstrap disponibles para la aplicacion actual.
<sup class="footnote" id="fnref-5_5"><a href="#fn-5_5">5</a></sup></p>

<div class="label" id="code-bootstrap_sass"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.3.</span> <span class="description">Agregando la gema <tt>bootstrap-sass</tt> al <code>Gemfile</code>.</span> </div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;https://rubygems.org&#39;</span>
<span class="n">ruby</span> <span class="s1">&#39;2.0.0&#39;</span>
<span class="c1">#ruby-gemset=railstutorial_rails_4_0</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;4.0.0&#39;</span>
<span class="n">gem</span> <span class="s1">&#39;bootstrap-sass&#39;</span><span class="p">,</span> <span class="s1">&#39;2.3.2.0&#39;</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
</pre></div>
</div></div>


<p>Para instalar Bootstrap, ejecutamos <code>bundle install</code> como siempre:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle install
</pre></div>
</div>


<p>Después iniciamos de nuevo el servidor web para incorporar los cambios a la aplicación de desarrollo. (En la mayoría de los sistemas, reiniciando el servidor involucrara presionar <tt>Ctrl-C</tt> y depues ejecutando <code>rails server</code>.) Finalmente, desde Rails 4.0 necesitamos agregar una linea a <code>config/application.rb</code> para hacer <tt>bootstrap-sass</tt> compatible con el asset pipeline, como se mostro en el <a class="ref" href="filling-in-the-layout.html#code-bootstrap_config">Listado&nbsp;5.4</a>.</p>

<div class="label" id="code-bootstrap_config"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.4.</span> <span class="description">Agregando una linea para tener compatibilidad con asset pipeline. <br /> <code>config/application.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">&#39;../boot&#39;</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="k">module</span> <span class="nn">SampleApp</span>
  <span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="ss">Rails::Application</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">precompile</span> <span class="o">+=</span> <span class="sx">%w(*.png *.jpg *.jpeg *.gif)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>El primer paso en agregar CSS a la medida a nuestra aplicación es abrir el archivo que la contiene:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> subl app/assets/stylesheets/custom.css.scss
</pre></div>
</div>


<p>Aquí es importante los nombres del directorio y del archivo. El directorio</p>

<div class="code"><div class="highlight"><pre><span class="go">app/assets/stylesheets</span>
</pre></div>
</div>


<p>es parte de asset pipeline (<a class="ref" href="filling-in-the-layout.html#sec-sass_and_the_asset_pipeline">Sección&nbsp;5.2</a>), y cualquier hoja de estilo en este directorio será automáticamente incluida como parte del archivo <code>application.css</code> file included in the site layout. incluida en el esquema del sitio. Ademas, el nombre del archivo custom.css.scss incluye la extensión <code>.css</code> el cual indica el archivo como archivo tipo CSS, y la extensión .scss, indica un archivo "Sassy CSS" y hace que el asset pipeline procese el archivo usando Sass. (No usaremos Sass hasta la <a class="ref" href="filling-in-the-layout.html#sec-sass">Sección&nbsp;5.2.2</a>, pero es necesario por ahora para que la gema <tt>bootstrap-sass</tt> haga su función.)</p>

<p>Dentro del archivo para CSS a la medida, podemos usar la funcion<code>@import</code> para incluir Bootstrap, como se muestra en el <a class="ref" href="filling-in-the-layout.html#code-bootstrap_css">Listado&nbsp;5.5</a>.</p>

<div class="label" id="code-bootstrap_css"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.5.</span> <span class="description">Agregando Bootstrap de CSS. <br /> <code>app/assets/stylesheets/custom.css.scss</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">&quot;bootstrap&quot;</span><span class="p">;</span>
</pre></div>
</div></div>


<p>Este incluye todo el armazón Bootstrap CSS, el resultado se muestra en la <a class="ref" href="filling-in-the-layout.html#fig-sample_app_only_bootstrap">Figura&nbsp;5.3</a>. (Podria ser necesario usar Ctrl-C para reiniciar el servidor web local. También vale la pena notar que la imagen aquí usada es de Bootstrap 2.0, mientras que el tutorial usa la imagen de Bootstrap 2.3, así que pueden haber pequeñas diferencias en como luce. No hay que preocuparse.) La posición del texto no es buena y el logotipo no parece tener ningún estilo, pero los colores y el botón para enrolarse se ven prometedores.</p>

<div class="label" id="fig-sample_app_only_bootstrap"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/sample_app_only_bootstrap_4_0.png" alt="sample_app_only_bootstrap_4_0" /></span></div><div class="caption"><span class="header">Figura 5.3: </span><span class="description">La aplicación muestra con Bootstrap CSS.&nbsp;<a href="http://railstutorial.org/images/Figuras/sample_app_only_bootstrap_4_0-full.png">(tamaño total)</a></span></div></div>


<p>Ahora agregaremos algo de CSS cual se usara por todo el sitio para estilizar el esquema de cada pagina individual, somo se muestra en el <a class="ref" href="filling-in-the-layout.html#code-universal_css">Listado&nbsp;5.6</a>. Hay un buen numero de reglas en el Listado 5.6; para tener una idea de lo que hace una regla de CSS, ayuda a menudo si se le ponen comentarios usando comentarios CSS, es decir poniendolos dentro de <code>/* &hellip; */</code>, y ver que cambio. El resultado del CSS en el Listado 5.6 se muestra en la <a class="ref" href="filling-in-the-layout.html#code-universal_css">Listado&nbsp;5.6</a> se muestra en la <a class="ref" href="filling-in-the-layout.html#fig-sample_app_universal">Figura&nbsp;5.4</a>.</p>

<div class="label" id="code-universal_css"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.6.</span> <span class="description">Agregando CSS para estilizar todas las paginas. <br /> <code>app/assets/stylesheets/custom.css.scss</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">&quot;bootstrap&quot;</span><span class="p">;</span>

<span class="cm">/* universal */</span>

<span class="nt">html</span> <span class="p">{</span>
  <span class="na">overflow-y</span><span class="o">:</span> <span class="no">scroll</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">Sección</span> <span class="p">{</span>
  <span class="na">overflow</span><span class="o">:</span> <span class="no">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">textarea</span> <span class="p">{</span>
  <span class="na">resize</span><span class="o">:</span> <span class="n">vertical</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>




<div class="label" id="fig-sample_app_universal"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/sample_app_universal_4_0.png" alt="sample_app_universal_4_0" /></span></div><div class="caption"><span class="header">Figura 5.4: </span><span class="description">Agregando espaciamiento y estilo universalmente.&nbsp;<a href="http://railstutorial.org/images/Figuras/sample_app_universal_4_0-full.png">(Tamaño total)</a></span></div></div>


<p>Observese que el CSS en el <a class="ref" href="filling-in-the-layout.html#code-universal_css">Listado&nbsp;5.6</a> tiene una forma consistente. En general, las reglas de CSS se refieren ya sea a una clase, un id, una etiqueta HTML, o una combinacion de los dos, seguidos por los comandos para estilizar. Por ejemplo,</p>

<div class="code"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>pone 60 pixeles de relleno en la parte superior de la pagina. A causa que esta la clase <code>navbar-fixed-top</code> en la etiqueta <code>header</code>, Bootstrap ajusta la barra del navegador en la parte superior de la pagina, asi que el relleno funciona para separar el texto principal de las herramientas de navegacion. (Devido a que el color de la navbar cambio entre Bootstrap 2.0 y 2.1, necesitamos la clase <code>navbar-inverse</code> para hacerla obscura y no brillante.) Mientras tanto, el CSS en la clase</p>

<div class="code"><div class="highlight"><pre><span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>asocia la clase <code>center</code> con la propiedad <code>text-align: center</code>. En otras palabras, el punto <code>.</code> en <code>.center</code> indica que la regla estiliza una clase. (Como veremos en el <a class="ref" href="filling-in-the-layout.html#code-logo_css">Listado&nbsp;5.8</a>, el signo numeral <code>#</code> identifica una regla para estilizar un <em>id</em> de CSS.) Esto significa que los elementos en cualquier etiqueta (como por ejemplo div) con la clase center estaran en el centro de la pagina. (Vimos un ejemplo de esta clase en el <a class="ref" href="filling-in-the-layout.html#code-signup_button">Listado&nbsp;5.2</a>.)</p>

<p>Aunque Bootstrap viene con unas reglas de CSS para buena tipografia, también agregaremos algunas reglas a la medida para la apariencia del texto en nuestro sitio, como se muestra en el <a class="ref" href="filling-in-the-layout.html#code-typography_css">Listado&nbsp;5.7</a>. (No todas de estas reglas aplican a la pagina Inicial, pero cada regla se usara en algún punto dentro de la aplicación.) El resultado del <a class="ref" href="filling-in-the-layout.html#code-typography_css">Listado&nbsp;5.7</a> is shown in <a class="ref" href="filling-in-the-layout.html#fig-sample_app_typography">Figura&nbsp;5.5</a>.</p>

<div class="label" id="code-typography_css"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.7.</span> <span class="description">Agregando CSS para una buena tipografia. <br /> <code>app/assets/stylesheets/custom.css.scss</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">&quot;bootstrap&quot;</span><span class="p">;</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>

<span class="o">/*</span> <span class="nt">typography</span> <span class="o">*/</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span> <span class="p">{</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">3</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-2</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.2</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">normal</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">p</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>




<div class="label" id="fig-sample_app_typography"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/sample_app_typography_4_0.png" alt="sample_app_typography_4_0" /></span></div><div class="caption"><span class="header">Figura 5.5: </span><span class="description">Agregando algo de estilo a la tipografia.&nbsp;<a href="http://railstutorial.org/images/Figuras/sample_app_typography_4_0-full.png">(Tamaño total)</a></span></div></div>


<p>Finalmente, agregaremos algunas reglas para estilizar el logotipo del sitio, el cual simple consiste del texto &ldquo;sample app&rdquo;. EL CSS en el <a class="ref" href="filling-in-the-layout.html#code-logo_css">Listado&nbsp;5.8</a> convierte el texto a todas mayusculas y modifica su tamaño, color, y su colocacion. (Hemos usado un id CSS porque esperamos que el logotipo del sitio aparezca en la pagina solo una vez, pero en su lugar podrias usar una clase.)</p>

<div class="label" id="code-logo_css"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.8.</span> <span class="description">Adding CSS for the site logo. <br /> <code>app/assets/stylesheets/custom.css.scss</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">&quot;bootstrap&quot;</span><span class="p">;</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>

<span class="o">/*</span> <span class="nt">header</span> <span class="o">*/</span>

<span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nn">#logo</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Aqui <code>color: #fff</code> cambia el color del logotipo a blanco. Los colores  en HTML pueden ser codificados con 3 pares de números con base-16 (Hexadecimal), uno para cada color primario que son rojo, verde, y azul (en ese orden). El código <code>#ffffff</code> pone los 3 colores al máximo dando así blanco puro, y <code>#fff</code> es la forma corta de escribir todo el <code>#ffffff</code>. El estándar CSS también define un largo numero de sinónimos para colores de HTLM comunes <a href="http://www.w3schools.com/html/html_colornames.asp">HTML colors</a>, incluyendo blanco con <code>white</code>  <code>#fff</code>. El resultado del CSS en el <a class="ref" href="filling-in-the-layout.html#code-logo_css">Listado&nbsp;5.8</a> se muestra en la <a class="ref" href="filling-in-the-layout.html#fig-sample_app_logo">Figura&nbsp;5.6</a>.</p>

<div class="label" id="fig-sample_app_logo"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/sample_app_logo_4_0.png" alt="sample_app_logo_4_0" /></span></div><div class="caption"><span class="header">Figura 5.6: </span><span class="description">La aplicación muestra con el logotipo estilizado.&nbsp;<a href="http://railstutorial.org/images/Figuras/sample_app_logo_4_0-full.png">(Tamaño Total)</a></span></div></div>




<div class="label" id="sec-partials"></div>


<h3><a id="sec-5_1_3" href="filling-in-the-layout.html#sec-partials" class="heading"><span class="number">5.1.3</span> Parciales</a></h3>


<p>Aunque el esquema en el <a class="ref" href="filling-in-the-layout.html#code-layout_new_structure">Listado&nbsp;5.1</a> sirve su propósito, se esta poniendo un poco desordenado. La parte shim  de HTML abarca 3 lineas e usa sintaxis algo extraño, especifico a IE, así que estaría bien si lo pusiéramos en un espacio por si solo. Ademas, el encabezamiento de HTML forma una unidad lógica, así que debería ser empacado todo en un solo lugar. La forma para lograr esto en Rails es usando una facilidad llamada <em>partials</em>. Vamos a primero ver como se ve el esquema después de que definimos los parciales (<a class="ref" href="filling-in-the-layout.html#code-layout_with_partials">Listado&nbsp;5.9</a>).</p>

<div class="label" id="code-layout_with_partials"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.9.</span> <span class="description">El esquema del sitio con parciales para la hoja de estilo y el encabezamiento. <br /> <code>app/views/layouts/application.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">full_title</span><span class="p">(</span><span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">))</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span> <span class="ss">media:</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
                                           <span class="s2">&quot;data-turbolinks-track&quot;</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span> <span class="s2">&quot;data-turbolinks-track&quot;</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/shim&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>En el <a class="ref" href="filling-in-the-layout.html#code-layout_with_partials">Listado&nbsp;5.9</a>, hemos remplazado las lineas de la hoja de estilo que tratan con la parte shim de HTML con una sola llamada a un ayudante de Rails llamado <code>render</code>:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/shim&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>El efecto de esta linea es buscar un archivo llamado <code>app/views/layouts/_shim.html.erb</code> evaluar su contenido, y agregarlo a la vista. (Recordermos que <%= ... %> es el sintaxis incrustado en Ruby necesario para evaluar una expresión Ruby y después meter los resultados a la vista<sup class="footnote" id="fnref-5_6"><a href="#fn-5_6">6</a></sup> ((Recordermos que <tt class="verb">&lt;%= ... %&gt;</tt> es el sintaxis incrustado en Ruby necesario para evaluar una expresión Ruby y después meter los resultados a la plantilla.) Notemos que el nombre del archivo lleva un guión bajo inicial <code>_shim.html.erb</code>; el convenio universal de como llamar los parciales lleva este guión bajo inicial, y entre otras cosas hace posible identificar los parciales a simple vista en un directorio.</p>

<p>Claro esta, para hacer que el parcial funcione tenemos que llenarlo con contenido, en el caso del parcial shim, son solo 3 lineas de código del <a class="ref" href="filling-in-the-layout.html#code-layout_new_structure">Listado&nbsp;5.1</a>; el resultado aparece en el <a class="ref" href="filling-in-the-layout.html#code-stylesheets_partial">Listado&nbsp;5.10</a>.</p>

<div class="label" id="code-stylesheets_partial"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.10.</span> <span class="description">Un parcial para el shim HTML. <br /> <code>app/views/layouts/_shim.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div></div>


<p>Similarmente, podemos mover el material del encabezamiento dentro del parcial mostrado en el <a class="ref" href="filling-in-the-layout.html#code-header_partial">Listado&nbsp;5.11</a> e insertarlo al esquema con otra llamada a <code>render</code>.</p>

<div class="label" id="code-header_partial"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.11.</span> <span class="description">A partial for the site header. <br /> <code>app/views/layouts/_header.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-fixed-top navbar-inverse&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;navbar-inner&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;sample app&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;logo&quot;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span>    <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>


<p>Ahora que sabemos como hacer un parcial, agreguemos un pie de pagina al sitio para que vaya con el encabezamiento. Por ahora podrás adivinar que le llamaremos <code>_footer.html.erb</code> y de pone el en directorio de los esquemas. (<a class="ref" href="filling-in-the-layout.html#code-footer_partial">Listado&nbsp;5.12</a>).<sup class="footnote" id="fnref-5_7"><a href="#fn-5_7">7</a></sup></p>

<div class="label" id="code-footer_partial"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.12.</span> <span class="description">Un parcial para el pie de pagina del sitio.
 <br /> <code>app/views/layouts/_footer.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span>   <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>Como con el encabezamiento, en el pie de pagina hemos usado <code>link_to</code> en lugar de los enlaces internos para las paginas Acerca y Contacto usaremos <code>&rsquo;#&rsquo;</code> por ahora. (Como con la etiqueta <code>header</code>, la etiqueta <code>footer</code> es nueva a HTML5.)</p>

<p>Para hacer el parcial de pie de pagina en el esquema, podemos seguir el mismo patrón que con las hojas de estilo y el parcial del encabezamiento. (<a class="ref" href="filling-in-the-layout.html#code-layout_with_footer">Listado&nbsp;5.13</a>).</p>

<div class="label" id="code-layout_with_footer"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.13.</span> <span class="description">El esquema del sitio con un parcial de pie de pagina. <br /> <code>app/views/layouts/application.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">full_title</span><span class="p">(</span><span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">))</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span> <span class="ss">media:</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
                                           <span class="s2">&quot;data-turbolinks-track&quot;</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span> <span class="s2">&quot;data-turbolinks-track&quot;</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/shim&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/footer&#39;</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Claro, el pie de pagina estara feo sin agregar algo de estilo. (<a class="ref" href="filling-in-the-layout.html#code-footer_css">Listado&nbsp;5.14</a>). El resultado aparece en la <a class="ref" href="filling-in-the-layout.html#fig-site_with_footer">Figura&nbsp;5.7</a>.</p>

<div class="label" id="code-footer_css"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.14.</span> <span class="description">Agregando el CSS para el pie de pagina del sitio. <br /> <code>app/assets/stylesheets/custom.css.scss</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>

<span class="o">/*</span> <span class="nt">footer</span> <span class="o">*/</span>

<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">margin-top</span><span class="o">:</span> <span class="mi">45</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#eaeaea</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#555</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#222</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">small</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">ul</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
  <span class="na">list-style</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>




<div class="label" id="fig-site_with_footer"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/site_with_footer_bootstrap_4_0.png" alt="site_with_footer_bootstrap_4_0" /></span></div><div class="caption"><span class="header">Figura 5.7: </span><span class="description">La pagina Inicial (<a href="http://localhost:3000/static_pages/home">/static_pages/home</a>) con el pie de pagina agregado. &nbsp;<a href="http://railstutorial.org/images/Figuras/site_with_footer_bootstrap_4_0-full.png">(Tamaño Total)</a></span></div></div>




<div class="label" id="sec-sass_and_the_asset_pipeline"></div>


<h2><a id="sec-5_2" href="filling-in-the-layout.html#sec-sass_and_the_asset_pipeline" class="heading"><span class="number">5.2</span> Sass y el asset pipeline</a></h2>


<p>Una de las adiciones mas notorias a la versión actual de Rails es asset pipeline, el cual  mejora significativamente la producción y administración de bienes estáticos como CSS, JavaScript, e imágenes. Esta sección nos da un repaso de alto nivel de los bienes en el pipeline y después nos muestra como usar una herramienta extraordinaria para hacer CSS llamado <em>Sass</em>, ahora incluido como estándar como parte del asset pipeline (flujo de bienes).</p>

<div class="label" id="sec-the_asset_pipeline"></div>


<h3><a id="sec-5_2_1" href="filling-in-the-layout.html#sec-the_asset_pipeline" class="heading"><span class="number">5.2.1</span> El Asset Pipeline (flujo de bienes).
</a></h3>


<p>El asset pipeline invulocra un buen numero de cambios a Rails, pero desde la perspectiva de un desarrollador típico de Rails, hay 3 características principales que se deben entender, directorios, archivos manifest, y preprocessor engines.<sup class="footnote" id="fnref-5_8"><a href="#fn-5_8">8</a></sup> Consideremos cada uno de ellos.</p>

<h4><a id="sec-5_2_1_1" href="filling-in-the-layout.html#sec-5_2_1_1" class="heading">Asset directories</a></h4>


<p>En versiones de Rails antes de 3.0 (incluyendo también 3.0), los bienes estáticos están en el directorio <code>public/</code> de esta manera:</p>

<ul>
<li><code>public/stylesheets</code></li>
<li><code>public/javascripts</code></li>
<li><code>public/images</code></li>
</ul>


<p>Los Archivos en estos directorios son automáticamente (hasta después de la versión 3.0) accesados solicitandolos a  http://example.com/stylesheets, etc.</p>

<p>Empezando con Rails 3.1, y continuando con Rails 4. hay <em>tres</em> directorios canonicos para los bienes estaticos, cada uno con su propio proposito:</p>

<ul>
<li><code>app/assets</code>: bienes especificos a la aplicacion actual</li>
<li><code>lib/assets</code>: bienes para librerias escritos por tu equipo de desarrollo</li>
<li><code>vendor/assets</code>: bienes de vendedores terceros</li>
</ul>


<p>Como puedes adivinar, cada uno de estos directorios tiene un subdirectorio para cada clase de bienes, por ejemplo,</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ls app/assets/
<span class="go">images      javascripts stylesheets</span>
</pre></div>
</div>


<p>At this point, we&rsquo;re in a position to understand the motivation behind the location of the <code>custom.css.scss</code> file in <a class="ref" href="filling-in-the-layout.html#sec-custom_css">Sección&nbsp;5.1.2</a>: <code>custom.css.scss</code> is specific to the sample application, so it goes in <code>app/assets/stylesheets</code>.</p>

<h4><a id="sec-5_2_1_2" href="filling-in-the-layout.html#sec-5_2_1_2" class="heading">Manifest files</a></h4>


<p>OUna vez se haya puesto los bienes en su lugar mas lógico, se puede usar los archivos <em>manifest files</em> para decirle a Rails (mediante la gema <a href="https://github.com/sstephenson/sprockets">Sprockets</a> gem) como combinarlos para formar un solo archivo. (Esto aplica a CSS, JavaScript pero no a imagines.) Como un ejemplo, hay que ver el archivos de manifiesto estándar para las hojas de estilo de la aplicación (<a class="ref" href="filling-in-the-layout.html#code-app_css_manifest">Listado&nbsp;5.15</a>).</p>

<div class="label" id="code-app_css_manifest"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.15.</span> <span class="description">El archivo de manifiesto para el CSS especifico para aplicación. <br /> <code>app/assets/stylesheets/application.css</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Este es el archivo de manifiesto que automaticamente incluira todas las hojas de estilo</span>
<span class="cm"> * disponibles en este directorio y cualquier subdirectorio. Eres libre de agregar </span>
<span class="cm"> * estilos que abarquen todo el sitio a este archivo y apareceran en la parte superior del </span>
<span class="cm"> * archivo compilado, pero es generalmente mejor crear un nuevo archivo por cada tipo de</span>
<span class="cm"> * estilo.</span>
<span class="cm"> *= require_self</span>
<span class="cm"> *= require_tree .</span>
<span class="cm">*/</span>
</pre></div>
</div></div>


<p>Las lineas aquí son realmente comentarios CSS, pero la gema Sprockets lo usa para incluir los archivos adecuados.</p>

<div class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> .</span>
<span class="cm"> .</span>
<span class="cm"> .</span>
<span class="cm"> *= require_self</span>
<span class="cm"> *= require_tree .</span>
<span class="cm">*/</span>
</pre></div>
</div>


<p>Here</p>

<div class="code"><div class="highlight"><pre><span class="go">*= require_tree .</span>
</pre></div>
</div>


<p>asegura que todos los archivos CSS en el directorio <code>app/assets/stylesheets</code> directory (incluyendo los 3 subdirectorios) están incluidos en la aplicacion CSS. La linea</p>

<div class="code"><div class="highlight"><pre><span class="go">*= require_self</span>
</pre></div>
</div>


<p>especifica en que lugar de la secuencia de carga se incluye el CSS dentro de <code>application.css</code>.</p>

<p>Rails viene con archivos de manifiesto sensibles estándar, y en el <em>Rails Tutorial</em> no necesitaremos hacerles cambios, pero la guia Rails de introduccion al flujo de bienes (asset pipelines) <a href="http://guides.rubyonrails.org/asset_pipeline.html">Rails Guides entry on the asset pipeline</a> tiene mas detalles si se necesita.</p>

<h4><a id="sec-5_2_1_3" href="filling-in-the-layout.html#sec-5_2_1_3" class="heading">Motor de preprocesodores (Preprocessor engines)</a></h4>


<p>Después de de haber reunido los bienes, Rails los prepara para la plantilla del sitio pasandolos por varios motores de preproceso e usa los archivos de manifiesto para combinarlos para entregarlos al navegador. Le decimos a Rails cual procesador usar usando las extensiones de los nombres de archivos; los casos mas comunes  son <code>.scss</code> para Sass, <code>.coffee</code> para CoffeeScript, y <code>.erb</code> para Ruby incrustado (ERb). Cubrimos primero ERb en la <a class="ref" href="static-pages.html#sec-embedded_ruby">Sección&nbsp;3.3.3</a>,  y cubrimos Sass en la <a class="ref" href="filling-in-the-layout.html#sec-sass">Sección&nbsp;5.2.2</a>. No necesitaremos CoffeeScript en este tutorial, pero es un pequeño lenguage elegante que compila hacia JavaSript. (El <a href="http://railscasts.com/episodes/267-coffeescript-basics">RailsCast
acerca de lo basico de CoffeeScript basics</a> es un buen lugar para empezar.)</p>

<p>Los motores de preproceso pueden unirse en cadena, para que</p>

<p><code>foobar.js.coffee</code></p>

<p>se procesa atravez del procesador de coffeeScript, y</p>

<p><code>foobar.js.erb.coffee</code></p>

<p>se procesa atravez de CoffeeScript y ERb(with the code running from right to left, i.e., CoffeeScript first).</p>

<h4><a id="sec-5_2_1_4" href="filling-in-the-layout.html#sec-5_2_1_4" class="heading">Eficiencia en la producción</a></h4>


<p>Una de las mejores cosas de asset pipeline es que optimiza los bienes para ser eficientes en una aplicación de produccion. Los Metodos tradicionales para organizar CSS y JavaScript involucran dividir la funcionalidad en archivos separados y formatear (con  mucha abreviatura). Mientras que esto es cómodo para el programador, esto es ineficiente en producción, incluyendo archivos múltiples de tamaño entero y esto retarda significativamente el tiempo de la carga de paginas (uno de los mas importantes factores que afecta la calidad de la experiencia para el usuario). Con el asset pip[eline, en producción todas las hojas de estilo de la aplicación se ponen en un archivo de CSS(<code>application.css</code>),todo el código para una aplicación JavaScipt se pone en un archivo JavaScript (<code>javascripts.js</code>)y todos estos tipos de archivo (incluyendo aquellos dentro de <code>lib/assets</code> y <code>vendor/assets</code>) son reducidos <em>minified</em> para remover el espacio blanco que hace pesado el archivo. Como resultado, obtenemos lo mejor de los dos mundos, múltiples archivos con buen formato para la comodidad del programador, e archivos individuales optimizados en producción.</p>

<div class="label" id="sec-sass"></div>


<h3><a id="sec-5_2_2" href="filling-in-the-layout.html#sec-sass" class="heading"><span class="number">5.2.2</span> Hojas de estilo sintácticamente impresionantes (Sass)</a></h3>


<p><em>Sass</em> es un lenguaje para escribir hojas de estilo que mejora CSS en muchas maneras. En esta sección, cubriremos dos de las mejorías mas importantes anidacion<em>nesting</em> y <em>variables</em>. (Una 3ra técnica, <em>mixins</em>, es introducida en la <a class="ref" href="sign-up.html#sec-rails_environments">Sección&nbsp;7.1.1</a>.)</p>

<p>Como se noto brevemente en la <a class="ref" href="filling-in-the-layout.html#sec-custom_css">Sección&nbsp;5.1.2</a>, Sass trabaja con un formato llamado SCSS (identificado con la extension <code>.scss</code>), cual es un superconjunto estricto de CSS, es decir, SCSS solo agrega <em>adds</em> caracteristicas a CSS, en vez de definir todo un nuevo sintaxis.<sup class="footnote" id="fnref-5_9"><a href="#fn-5_9">9</a></sup> Esto significa que todo archivo CSS valido es tambien valido a SCSS, cual es muy comodo para las reglas de estilo existentes. En nuestro caso, usamos SCSS desde el principio para poder aprovechar Bootstrap. Ya que el Rails asset pipeline (flujo de bienes de Rails) automaticamente usa Sass para procesar archivos con la extension <code>.scss</code>, el archivo <code>custom.css.scss</code> sera procesado por el preprocesador Sass antes de ser empacado para su entrega al navegador.</p>

<h4><a id="sec-5_2_2_1" href="filling-in-the-layout.html#sec-5_2_2_1" class="heading">Anidacion (Nesting)</a></h4>


<p>Un patron comun en las hojas de estilo es tener reglas que aplican a elementos anidados. Por ejemplo, en el <a class="ref" href="filling-in-the-layout.html#code-universal_css">Listado&nbsp;5.6</a> tenemos reglas para <code>.center</code> y para <code>.center h1</code>:</p>

<div class="code"><div class="highlight"><pre><span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Podemos remplazar Sass con</p>

<div class="code"><div class="highlight"><pre><span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Aqui la regla <code>h1</code> anidada automaticamente hereda el contexto de <code>.center</code>.</p>

<p>Hay un segundo candidato para la anidacion que requiere que su sintaxis sea un poco diference. En el <a class="ref" href="filling-in-the-layout.html#code-logo_css">Listado&nbsp;5.8</a>, tenemos el codigo:</p>

<div class="code"><div class="highlight"><pre><span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nn">#logo</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Aquí el id del logotipo <code>#logo</code> aparece dos veces, una vez por si solo y una vez con el atributo mover (el cual controla su apariencia cuando el puntero del raton flota sobre el elemento en cuestion). Para poder anidar la segunda regla, necesitamos referenciar el elemento padre <code>#logo</code>; en SCSS, esto se logra con el signo de &nbsp;<code>&amp;</code> de esta manera:</p>

<div class="code"><div class="highlight"><pre><span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
    <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Sass cambia <code>&amp;:hover</code> a <code>#logo:hover</code> como parte de convertir SCSS a CSS.</p>

<p>Ambas de estas tecnicas de anidacion aplican al pie de pagina de CSS en el <a class="ref" href="filling-in-the-layout.html#code-footer_css">Listado&nbsp;5.14</a>, el cual se puede transformar en lo siguiente:</p>

<div class="code"><div class="highlight"><pre><span class="nt">footer</span> <span class="p">{</span>
  <span class="na">margin-top</span><span class="o">:</span> <span class="mi">45</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#eaeaea</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
  <span class="nt">a</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="mh">#555</span><span class="p">;</span>
    <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
      <span class="na">color</span><span class="o">:</span> <span class="mh">#222</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nt">small</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">ul</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
    <span class="na">list-style</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
    <span class="nt">li</span> <span class="p">{</span>
      <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
      <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Convirtiendo el Listado <a class="ref" href="filling-in-the-layout.html#code-footer_css">Listado&nbsp;5.14</a> a mano es un buen ejercicio, y se debería de verificar que el CSS aun funciona después de la conversión. </p>

<h4><a id="sec-5_2_2_2" href="filling-in-the-layout.html#sec-5_2_2_2" class="heading">Variables</a></h4>


<p>Sass nos permite definir las <em>variables</em> para eliminar duplicación y escribir código mas expresivo. Por ejemplo, viendo en el <a class="ref" href="filling-in-the-layout.html#code-typography_css">Listado&nbsp;5.7</a> and <a class="ref" href="filling-in-the-layout.html#code-footer_css">Listado&nbsp;5.14</a>, observamos que hay repetidas referencias al mismo color.</p>

<div class="code"><div class="highlight"><pre><span class="nt">h2</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>En este caso, <code>#999</code> es un gris claro, y le podemos dar un nombre definiendo la variable de esta manera:</p>

<div class="code"><div class="highlight"><pre><span class="nv">$lightGray</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
</pre></div>
</div>


<p>Esto nos permite escribir nuestro SCSS así:</p>

<div class="code"><div class="highlight"><pre><span class="nv">$lightGray</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">h2</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$lightGray</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$lightGray</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Debido a que los nombres de las variables como <code>$lightGray</code> son mas descriptivos que <code>#999</code>, a menudo es útil definir las variables hasta para valores que no se repiten. En efecto, el armazón Bootstrap define un gran numero de las variables para los colores, disponibles en linea en la pagina <a href="http://bootstrapdocs.com/v2.0.4/docs/less.html">Bootstrap page of LESS variables</a>. Esa pagina define las variables usando LESS, no Sass, pero la gema bootstrap-sass provee los equivalentes de Sass. No es dificir adivinar la correspondencia; donde LESS usa una arroba @, Sass usa un signo de dinero $. Observando la pagina de las variables Bootstrap, vemos que hay una variable para el gris claro</p>

<div class="code"><div class="highlight"><pre> <span class="k">@grayLight</span><span class="nd">:</span> <span class="nn">#999</span><span class="o">;</span>
</pre></div>
</div>


<p>Esto significa que, atravez de la gema <tt>bootstrap-sass</tt>, tiene que haber una variable SCSS <code>$grayLight</code>. Podemos usar esto para remplazar nuestra variable a la medida, <code>$lightGray</code>, el cual nos da</p>

<div class="code"><div class="highlight"><pre><span class="nt">h2</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>Aplicando la anidacion Sass y la caracteristica de definir la variable al archivo SCSS nos da el archivo en el <a class="ref" href="filling-in-the-layout.html#code-refactored_scss">Listado&nbsp;5.16</a>. Esto usa ambas variables Sass (inferido de la pagina Bootstrap LESS) y los nombres de colores ya incorporado (por ejemplo, <code>white</code> (blanco) para <code>#fff</code>). Observese la dramatica mejoria en las reglas para la etiqueta <code>footer</code>.</p>

<div class="label" id="code-refactored_scss"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.16.</span> <span class="description">El archivo SCSS inicial convertido para usar anidacion y variables. <br /> <code>app/assets/stylesheets/custom.css.scss</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">&quot;bootstrap&quot;</span><span class="p">;</span>

<span class="cm">/* mixins, variables, etc. */</span>

<span class="nv">$grayMediumLight</span><span class="o">:</span> <span class="mh">#eaeaea</span><span class="p">;</span>

<span class="cm">/* universal */</span>

<span class="nt">html</span> <span class="p">{</span>
  <span class="na">overflow-y</span><span class="o">:</span> <span class="no">scroll</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">Sección</span> <span class="p">{</span>
  <span class="na">overflow</span><span class="o">:</span> <span class="no">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">textarea</span> <span class="p">{</span>
  <span class="na">resize</span><span class="o">:</span> <span class="n">vertical</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* typography */</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span> <span class="p">{</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">3</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-2</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.2</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">normal</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">p</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/* header */</span>

<span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
    <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* footer */</span>

<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">margin-top</span><span class="o">:</span> <span class="mi">45</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="nv">$grayMediumLight</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
  <span class="nt">a</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="nv">$gray</span><span class="p">;</span>
    <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
      <span class="na">color</span><span class="o">:</span> <span class="nv">$grayDarker</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nt">small</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">ul</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
    <span class="na">list-style</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
    <span class="nt">li</span> <span class="p">{</span>
      <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
      <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Sass nos da aun mas maneras de simplificar las hojas de estilo, pero el código en el <a class="ref" href="filling-in-the-layout.html#code-refactored_scss">Listado&nbsp;5.16</a> usa las características mas importantes y nos da un buen inicio. Vease el sitio <a href="http://sass-lang.com/">Sass website</a> para mas detalles.</p>

<div class="label" id="sec-layout_links"></div>


<h2><a id="sec-5_3" href="filling-in-the-layout.html#sec-layout_links" class="heading"><span class="number">5.3</span> Enlaces del Esquema</a></h2>


<p>Ahora que acabamos el esquema del sitio con un estilo bastante bueno, es tiempo de remplazar los <code>&rsquo;#&rsquo;</code> que pusimos en el lugar de los enlaces. Claro, podríamos codificar los enlaces así:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/static_pages/about&quot;</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>


<p>pero esa no es la manera Rails. En primera, seria bueno si el URL para la pagina fuese /about en vez de static_pages/about. Por otra parte, convencionalmente Rails usa <em>named routes</em>, rutas nombradas), las cuales involucran codigo como este</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>De esta manera el código tiene un significado mas transparente, y aparte es flexible ya que podemos cambiar la definición de about_path y todo URL cambia cuando se usa <code>about_path</code> .</p>

<p>La lista entera de los enlaces planeados aparece en la Tabla <a class="ref" href="filling-in-the-layout.html#table-url_mapping">Tabla&nbsp;5.1</a>, junto con sus URL correspondientes y sus rutas. Implementaremos todas menos la ultima antes de terminar el Capítulo (We&rsquo;ll make the last one in <a class="ref" href="sign-in-sign-out.html#top">Capítulo&nbsp;8</a>.)</p>

<div class="label" id="table-url_mapping"></div>


<div class="table"><div class="center">
<table class="tabular"><tr><th class="align_left"><strong>Page</strong></th><th class="align_left"><strong>URL</strong></th><th class="align_right"><strong>Named route</strong></th></tr><tr class="top_bar"><td class="align_left">Inicial</td><td class="align_left">/</td><td class="align_right"><code>root_path</code></td></tr><tr><td class="align_left">Acerca</td><td class="align_left">/about</td><td class="align_right"><code>about_path</code></td></tr><tr><td class="align_left">Ayuda</td><td class="align_left">/help</td><td class="align_right"><code>help_path</code></td></tr><tr><td class="align_left">Contacto</td><td class="align_left">/contact</td><td class="align_right"><code>contact_path</code></td></tr><tr><td class="align_left">Enrolar</td><td class="align_left">/signup</td><td class="align_right"><code>Registrarse_path</code></td></tr><tr><td
class="align_left">Ingresar</td><td class="align_left">/signin</td><td class="align_right"><code>signin_path</code></td></tr></table></div><div class="caption"><span class="header">Tabla 5.1: </span><span class="description">Ruta y el URL correspondiente para los enlaces del sitio.</span></div></div>


<p>Antes de seguir, agreguemos una pagina de Contacto (asignado como un ejercicio en el <a class="ref" href="static-pages.html#top">Capítulo&nbsp;3</a>).  La prueba es igual como se muestra en el <a class="ref" href="filling-in-the-layout.html#code-contact_page_test">Listado&nbsp;5.17</a>, la cual simplemente sigue el modelo visto en el <a class="ref" href="static-pages.html#code-pages_controller_spec_title">Listado&nbsp;3.19</a>.</p>

<div class="label" id="code-contact_page_test"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.17.</span> <span class="description">Pruebas para una pagina de Contacto. <br /> <code>spec/requests/static_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;Static pages&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">describe</span> <span class="s2">&quot;Contact page&quot;</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">&quot;should have the content &#39;Contact&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="s1">&#39;/static_pages/contact&#39;</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Contact&#39;</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should have the title &#39;Contact&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="s1">&#39;/static_pages/contact&#39;</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App | Contact&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Para asegurarse que ambas de estas pruebas dentro del Listado <a class="ref" href="filling-in-the-layout.html#code-contact_page_test">Listado&nbsp;5.17</a>, fallen necesitamos agregarle un comentario al enlace de &ldquo;Contacto&rdquo; en el pie de la pagina, como se muestra en el <a class="ref" href="filling-in-the-layout.html#code-comment_out_footer">Listado&nbsp;5.18</a>.</p>

<div class="label" id="code-comment_out_footer"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.18.</span> <span class="description">Agregando un comentario al enlace de &ldquo;Contacto&rdquo; en el pie de pagina. <br /> <code>app/views/layouts/_footer.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span>   <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%#</span><span class="c">= link_to &quot;Contact&quot;, &#39;#&#39; </span><span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>Podemos ver en el <a class="ref" href="filling-in-the-layout.html#code-comment_out_footer">Listado&nbsp;5.18</a> como agregar un comentario al Ruby incrustado, el cual involucra poner un caracter de comentario Ruby&nbsp;<code>#</code> inmediatamente despues del signo de porciento <code>%<code>:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%#</span><span class="c">= link_to &quot;Contact&quot;, &#39;#&#39; </span><span class="cp">%&gt;</span>
</pre></div>
</div>


<p>Hasta este punto, las pruebas en el <a class="ref" href="filling-in-the-layout.html#code-contact_page_test">Listado&nbsp;5.17</a> deberian de fallar:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div>
</div>


<p>El codigo de la applicacion es paralelo a la adicion de la pagina Acerca en la <a class="ref" href="static-pages.html#sec-adding_a_page">Sección&nbsp;3.2.2</a>: primero actualizamos las rutas (<a class="ref" href="filling-in-the-layout.html#code-contact_route">Listado&nbsp;5.19</a>), después agregamos una accion contact para el controlador StaticPages <code>contact</code> (<a class="ref" href="filling-in-the-layout.html#code-contact_action">Listado&nbsp;5.20</a>), y finalmente creamos una vista Contacto (<a class="ref" href="filling-in-the-layout.html#code-contact_view">Listado&nbsp;5.21</a>).</p>

<div class="label" id="code-contact_route"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.19.</span> <span class="description">Adding a route for the Contact page. <br /> <code>config/routes.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="ss">SampleApp::Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">&quot;static_pages/home&quot;</span>
  <span class="n">get</span> <span class="s2">&quot;static_pages/help&quot;</span>
  <span class="n">get</span> <span class="s2">&quot;static_pages/about&quot;</span>
  <span class="n">get</span> <span class="s2">&quot;static_pages/contact&quot;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-contact_action"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.20.</span> <span class="description">Agregando una acción para la pagina Contacto. <br /> <code>app/controllers/static_pages_controller.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">StaticPagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="k">def</span> <span class="nf">contact</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-contact_view"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.21.</span> <span class="description">La vista para la pagina Contacto. <br /> <code>app/views/static_pages/contact.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">provide</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="s1">&#39;Contact&#39;</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;h1&gt;</span>Contact<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>
  Contact Ruby on Rails Tutorial about the sample app at the
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/contact&quot;</span><span class="nt">&gt;</span>contact page<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div></div>


<p>Ahora asegurate que la pruebas se pasen:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div>
</div>


<p>Hasta este punto, al haber pasado por el ciclo Rojo-Verde para verificar que las pruebas analicen lo correcto, debemos de quitar el comentario en el enlace "Contacto" dentro del pie de pagina. (<a class="ref" href="filling-in-the-layout.html#code-uncomment_footer">Listado&nbsp;5.22</a>). Esto no es lo ideal, porque ahora nuestras pruebas no detectara una regresión si accidentalmente removimos la etiqueta <code>h1</code> del <a class="ref" href="filling-in-the-layout.html#code-contact_view">Listado&nbsp;5.21</a>. Para que se arregle este problema, el cual requiere escribir una prueba específicamente para para el contenido de <code>h1</code>, se resuelve en un ejercicio aquí (<a class="ref" href="filling-in-the-layout.html#sec-layout_exercises">Sección&nbsp;5.6</a>).</p>

<div class="label" id="code-uncomment_footer"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.22.</span> <span class="description">Removiendo el comentario en el enlace "Contacto" dentro del pie de pagina. <br /> <code>app/views/layouts/_footer.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span>   <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>




<div class="label" id="sec-route_tests"></div>


<h3><a id="sec-5_3_1" href="filling-in-the-layout.html#sec-route_tests" class="heading"><span class="number">5.3.1</span> Pruebas de las rutas</a></h3>


<p>Con el trabajo que ya hemos hecho escribiendo pruebas para la integración de las paginas estáticas, hace que escribir pruebas para las rutas sea simple: solo se remplaza cada vez que una dirección codificada aparezca con el nombre deseado de la ruta de la <a class="ref" href="filling-in-the-layout.html#table-url_mapping">Tabla&nbsp;5.1</a>. En otras palabras, cambiamos</p>

<div class="code"><div class="highlight"><pre><span class="n">visit</span> <span class="s1">&#39;/static_pages/about&#39;</span>
</pre></div>
</div>


<p>a</p>

<div class="code"><div class="highlight"><pre><span class="n">visit</span> <span class="n">about_path</span>
</pre></div>
</div>


<p>y así sucesivamente para las otras paginas. El resultado aparece en el <a class="ref" href="filling-in-the-layout.html#code-route_tests">Listado&nbsp;5.23</a>.</p>

<div class="label" id="code-route_tests"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.23.</span> <span class="description">Pruebas para las rutas nombradas. <br /> <code>spec/requests/static_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;Static pages&quot;</span> <span class="k">do</span>

  <span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">&quot;should have the h1 &#39;Sample App&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">root_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should have the base title&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">root_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App&quot;</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should not have a custom page title&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">root_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Help page&quot;</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">&quot;should have the h1 &#39;Help&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">help_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Help&#39;</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should have the title &#39;Help&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">help_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App | Help&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;About page&quot;</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">&quot;should have the h1 &#39;About Us&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">about_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;About Us&#39;</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should have the title &#39;About Us&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">about_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App | About Us&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Contact page&quot;</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">&quot;should have the content &#39;Contact&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">contact_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Contact&#39;</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should have the title &#39;Contact&#39;&quot;</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">contact_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App | Contact&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Como es usual, de debe verificar que las pruebas ahora están en rojo:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div>
</div>


<p>A proposito, si el codigo en el <a class="ref" href="filling-in-the-layout.html#code-route_tests">Listado&nbsp;5.23</a> te parece repetitivo, no estas solo. Refactorizaremos este desorden para convertirlo en una hermosa joya en la <a class="ref" href="filling-in-the-layout.html#sec-pretty_rspec">Sección&nbsp;5.3.4</a>.</p>

<div class="label" id="sec-rails_routes"></div>


<h3><a id="sec-5_3_2" href="filling-in-the-layout.html#sec-rails_routes" class="heading"><span class="number">5.3.2</span> Rutas Rails</a></h3>


<p>Ahora que tenemos pruebas para los URL que queremos, es tiempo de hacerlos funcionar. Como se noto en la <a class="ref" href="static-pages.html#sec-static_pages">Sección&nbsp;3.1</a>, el archivo que Rails usa para las asignaciones de los URL es <code>config/routes.rb</code>. Si se le echa un vistazo al archivo para rutas estándar, parece bastante desordenado, pero es un desorden util--lleno de muestras de asignaciones de ruta con  comentarios. Sugiero leerlas siquiera en una ocasión, y también sugiero echar un vistazo al Articulo <a href="http://guides.rubyonrails.org/routing.html">Rails Guides article &ldquo;Rails Routing from the outside in&rdquo;</a> para una explicación mas a fondo acerca del tratamiento de las rutas.</p>

<p>Para définir las rutas nombradas, necesitamos remplazar las reglas como</p>

<div class="code"><div class="highlight"><pre><span class="n">get</span> <span class="s1">&#39;static_pages/help&#39;</span>
</pre></div>
</div>


<p>con</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span> <span class="ss">to:</span> <span class="s1">&#39;static_pages#help&#39;</span><span class="p">,</span> <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
</pre></div>
</div>


<p>Esto hace que la pagina valida en <code>/help</code> (respondiendo a solicitudes<tt>GET</tt>) y la ruta llamada <code>help_path</code> retornen su camino hacia la misma pagina. (De hecho, al usar <code>get</code> en vez de <code>match</code> dan las mismas rutas nombradas, pero usando <code>match</code> es mas convencional.)</p>

<p>Al aplicar este patrón a las otras paginas estáticas nos da el <a class="ref" href="filling-in-the-layout.html#code-static_page_routes">Listado&nbsp;5.24</a>. La única excepción es la pagina Inicial, la cual arreglaremos en el <a class="ref" href="filling-in-the-layout.html#code-root_route">Listado&nbsp;5.26</a>.</p>

<div class="label" id="code-static_page_routes"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.24.</span> <span class="description">Rutas para las paginas estaticas.<br /> <code>config/routes.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="ss">SampleApp::Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">to:</span> <span class="s1">&#39;static_pages#help&#39;</span><span class="p">,</span>    <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">to:</span> <span class="s1">&#39;static_pages#about&#39;</span><span class="p">,</span>   <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">to:</span> <span class="s1">&#39;static_pages#contact&#39;</span><span class="p">,</span> <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Si lees el código en el <a class="ref" href="filling-in-the-layout.html#code-static_page_routes">Listado&nbsp;5.24</a> con cuidado, es posible que puedas descifrar lo que hace; por ejemplo, puedes ver que</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span> <span class="ss">to:</span> <span class="s1">&#39;static_pages#about&#39;</span><span class="p">,</span>  <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
</pre></div>
</div>


<p>empareja en la solicitud de <tt>GET</tt> para <code>&rsquo;/about&rsquo;</code> y la lleva a la accion <code>about</code> Antes, esto era mas explicito: Usabamos:</p>

<div class="code"><div class="highlight"><pre><span class="n">get</span> <span class="s1">&#39;static_pages/about&#39;</span>
</pre></div>
</div>


<p>para llegar al mismo lugar, pero <code>/about</code> is more succinct. es mas sucinto. Ademas, como se menciono arriba, el código <code>match &rsquo;/about&rsquo;</code> también automáticamente crea  <em>named routes</em> (rutas nombradas) para usarse en vistas y controladores:</p>
c
<div class="code"><div class="highlight"><pre><span class="n">about_path</span> <span class="o">-&gt;</span> <span class="s1">&#39;/about&#39;</span>
<span class="n">about_url</span>  <span class="o">-&gt;</span> <span class="s1">&#39;http://localhost:3000/about&#39;</span>
</pre></div>
</div>


<p>Notemos que el URL <code>about_url</code> es el URL <em>completo</em> URL http://localhost:3000/about (ya que <code>localhost:3000</code> se reemplaza con el nombre del dominio, tal como <code>example.com</code>, para una pagina completamente desplegada). Como fue discutido en la <a class="ref" href="filling-in-the-layout.html#sec-layout_links">Sección&nbsp;5.3</a>, para obtener solo /about, se puede usar <code>about_path</code>. En el tutorial <em>Rails Tutorial</em>, seguiremos el convenio usando la forma <code>path</code> excepto cuando hagamos redireccionamientos, en ese caso se usara la forma url. Esto es porque después de los redireccionamientos el estándar HTTP tecnicamente requiere un URL completo, completo, aunque en la mayoria de los navegadores funcionaran de ambas formas.</p>

<p>Con estas rutas ya definidas, las pruebas de las paginas Ayuda, Acerca de Nosotros, y Contacto deberían de pasar:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div>
</div>


<p>Esto deja que la prueba para la pagina Inicial sea la ultima en fallar.</p>

<p>Para establecer un trazado de mapa para la ruta de la pagina Inicial, <em>podríamos</em> podríamos usar código como este:</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="ss">to:</span> <span class="s1">&#39;static_pages#home&#39;</span><span class="p">,</span> <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
</pre></div>
</div>


<p>Esto es innecesario, aunque; Rails tiene unas instrucciones especiales para el URL raiz&nbsp;/ (&ldquo;barra oblicua&rdquo;) localizada mas debajo dentro del archivo. (<a class="ref" href="filling-in-the-layout.html#code-root_route_hint">Listado&nbsp;5.25</a>).</p>

<div class="label" id="code-root_route_hint"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.25.</span> <span class="description">Dentro de un comentario se encuentra la pista de como definir la ruta raíz.<br /> <code>config/routes.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="ss">SampleApp::Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="c1"># You can have the root of your site routed with &quot;root&quot;</span>
  <span class="c1"># root &#39;welcome#index&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Usando el <a class="ref" href="filling-in-the-layout.html#code-root_route_hint">Listado&nbsp;5.25</a> como modelo, llegamos a el <a class="ref" href="filling-in-the-layout.html#code-root_route">Listado&nbsp;5.26</a> para enrutar el URL raiz&nbsp;/ a la pagina Inicial.</p>

<div class="label" id="code-root_route"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.26.</span> <span class="description">Agregando un trazado de mapa para la ruta raíz. <br /> <code>config/routes.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="ss">SampleApp::Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">root</span>  <span class="s1">&#39;static_pages#home&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">to:</span> <span class="s1">&#39;static_pages#help&#39;</span><span class="p">,</span>    <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">to:</span> <span class="s1">&#39;static_pages#about&#39;</span><span class="p">,</span>   <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">to:</span> <span class="s1">&#39;static_pages#contact&#39;</span><span class="p">,</span> <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Este código hace un trazado de mapa para el URL raiz&nbsp;/ to /static_pages/home, el cual significa que <a href="http://localhost:3000/">http://localhost:3000/</a> sea mas que la pagina predeterminada Rails de la <a class="ref" href="beginning.html#fig-riding_rails">Figura&nbsp;1.3</a>.Tambien nos da los ayudantes Rails siguientes:</p>

<div class="code"><div class="highlight"><pre><span class="n">root_path</span> <span class="o">-&gt;</span> <span class="s1">&#39;/&#39;</span>
<span class="n">root_url</span>  <span class="o">-&gt;</span> <span class="s1">&#39;http://localhost:3000/&#39;</span>
</pre></div>
</div>


<p>Con esto, todas las rutas para las paginas estáticas están funcionando, y estas pruebas deberían pasar:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div>
</div>


<p>Ahora solo tenemos que llenar los enlaces en el esquema.</p>

<div class="label" id="sec-named_routes"></div>


<h3><a id="sec-5_3_3" href="filling-in-the-layout.html#sec-named_routes" class="heading"><span class="number">5.3.3</span> Rutas Nombradas</a></h3>


<p>Pongamos las rutas nombradas en la <a class="ref" href="filling-in-the-layout.html#sec-rails_routes">Sección&nbsp;5.3.2</a> to work in our layout. a trabajar en nuestro esquema. Esto implica llenar los segundos argumentos de las funciones <code>link_to</code> con las rutas nombradas apropiadas. Por ejemplo, convertiremos</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>a</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>y asi sucesivamente.</p>

<p>Empezaremos con el encabezamiento parcial, <code>_header.html.erb</code> (<a class="ref" href="filling-in-the-layout.html#code-header_partial_links">Listado&nbsp;5.27</a>), el cual tiene enlaces para las paginas de Ayuda e Inicial. Al hacer esto, también seguiremos el convenio web común para vincular el logotipo a la pagina Inicial.
</p>

<div class="label" id="code-header_partial_links"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.27.</span> <span class="description">Encabezamiento parcial con enlaces. <br /> <code>app/views/layouts/_header.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">&quot;navbar navbar-fixed-top navbar-inverse&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;navbar-inner&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;sample app&quot;</span><span class="p">,</span> <span class="n">root_path</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;logo&quot;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;nav pull-right&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>    <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span>    <span class="n">help_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>


<p>No tendremos una ruta nombrada para el enlace de la pagina Ingresar hasta el <a class="ref" href="sign-in-sign-out.html#top">Capítulo&nbsp;8</a>, así que pusimos <code>&rsquo;#&rsquo;</code> por ahora.</p>

<p>The other place with links is the footer partial, <code>_footer.html.erb</code>, which has links for the About and Contact pages (<a class="ref" href="filling-in-the-layout.html#code-footer_partial_links">Listado&nbsp;5.28</a>).</p>

<div class="label" id="code-footer_partial_links"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.28.</span> <span class="description">Pie de Pagina parcial con enlaces. <br /> <code>app/views/layouts/_footer.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span>   <span class="n">about_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="n">contact_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>Con eso, nuestro esquema tiene enlaces para todas la paginas estáticas creadas en el <a class="ref" href="static-pages.html#top">Capítulo&nbsp;3</a>, de esta manera, por ejemplo, <a href="http://localhost:3000/about">/about</a> va a la pagina Acerca de Nosotros (<a class="ref" href="filling-in-the-layout.html#fig-about_page">Figura&nbsp;5.8</a>).</p>

<p>Por cierto, vale la pena mencionar que aunque no hemos puesto en prueba la presencia de los enlaces en el esquema, nuestras pruebas fallaran si las rutas no han sido definidas. Se puede verificar esto al poner comentarios en las rutas que están en el <a class="ref" href="filling-in-the-layout.html#code-static_page_routes">Listado&nbsp;5.24</a> y ejecutar tu conjunto de pruebas. Para un método de prueba efectivo que verifica que los enlaces vayan a los lugares correctos, ve la <a class="ref" href="filling-in-the-layout.html#sec-layout_exercises">Sección&nbsp;5.6</a>.</p>

<div class="label" id="fig-about_page"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/about_page_styled.png" alt="about_page_styled" /></span></div><div class="caption"><span class="header">Figura 5.8: </span><span class="description">The About page at  <a href="http://localhost:3000/about">/about</a>.&nbsp;<a href="http://railstutorial.org/images/Figuras/about_page_styled-full.png">(full size)</a></span></div></div>




<div class="label" id="sec-pretty_rspec"></div>


<h3><a id="sec-5_3_4" href="filling-in-the-layout.html#sec-pretty_rspec" class="heading"><span class="number">5.3.4</span> Pretty RSpec</a></h3>


<p>Como mencionamos en la <a class="ref" href="filling-in-the-layout.html#sec-route_tests">Sección&nbsp;5.3.1</a> las pruebas para las paginas estáticas se están volviendo verbosas y repetitivas (<a class="ref" href="filling-in-the-layout.html#code-route_tests">Listado&nbsp;5.23</a>). En esta sección usaremos las características del RSpec mas actual para hacer nuestras pruebas mas compactas y elegantes.</p>

<p>Vamos a ver un par de ejemplos para ver como se pueden mejorar:</p>

<div class="code"><div class="highlight"><pre><span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>

  <span class="n">it</span> <span class="s2">&quot;should have the content &#39;Sample App&#39;&quot;</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should have the base title&quot;</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should not have a custom page title&quot;</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>


<p>Una cosa que notamos es que los 3 ejemplos incluyen una visita a la ruta de raíz. Podemos eliminar esta duplicación con una esta sección de código llamada<code>before</code>:</p>

<div class="code"><div class="highlight"><pre><span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>
  <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

  <span class="n">it</span> <span class="s2">&quot;should have the content &#39;Sample App&#39;&quot;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should have the base title&quot;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should not have a custom page title&quot;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>


<p>Este usa la linea</p>

<div class="code"><div class="highlight"><pre><span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>
</pre></div>
</div>


<p>para visitar la ruta de raíz antes de cada ejemplo.(El metodo <code>before</code>  también puede ser invocado con  <code>before(:each)</code>, el cual es un equivalente.)</p>

<p>Otra fuente de duplicación aparece en cada ejemplo, tenemos a</p>

<div class="code"><div class="highlight"><pre><span class="n">it</span> <span class="s2">&quot;should have the content &#39;Sample App&#39;&quot;</span> <span class="k">do</span>
</pre></div>
</div>


<p>y</p>

<div class="code"><div class="highlight"><pre><span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span>
</pre></div>
</div>


<p>los cuales esencialmente dicen lo mismo. También, ambos ejemplos hacen referencia al variable <code>page</code>. Podemos eliminar estas fuentes de duplicación al decirle a RSpec que <code>page</code> es el asunto (llamado <em>subject</em>)de verificar de las pruebas usando</p>

<div class="code"><div class="highlight"><pre><span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>
</pre></div>
</div>


<p>y después usando un variante del metodo <code>it</code> para colapsar el código y descripcion en una sola linea:</p>

<div class="code"><div class="highlight"><pre><span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span> <span class="p">}</span>
</pre></div>
</div>


<p>debido a <code>subject { page }</code>, la llamada <code>should</code> automaticamente usala variable <code>page</code> proveída por Capybara (<a class="ref" href="static-pages.html#sec-TDD">Sección&nbsp;3.2.1</a>).</p>

<p>Al aplicar estos cambios nos dan pruebas mucho mas compactas para la pagina Inicial:</p>

<div class="code"><div class="highlight"><pre>  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">&quot;Ruby on Rails Tutorial Sample App&quot;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
</pre></div>
</div>


<p>Este código se ve mejor, pero el titulo es aun demasiado largo. En efecto, la mayor porción de los títulos in el <a class="ref" href="filling-in-the-layout.html#code-route_tests">Listado&nbsp;5.23</a> tienen largos títulos en el formulario.</p>

<div class="code"><div class="highlight"><pre><span class="s2">&quot;Ruby on Rails Tutorial Sample App | About&quot;</span>
</pre></div>
</div>


<p>Un ejercicio en la <a class="ref" href="static-pages.html#sec-static_pages_exercises">Sección&nbsp;3.5</a> propone eliminar una parte de esta duplicación, al definir el variable <code>base_title</code> y usando la interpolacion de strings (<a class="ref" href="static-pages.html#code-pages_controller_spec_exercise">Listado&nbsp;3.31</a>). Podriamos hasta mejorar si definimos <code>full_title</code>, el cual es paralelo a el ayudante <code>full_title</code> del <a class="ref" href="rails-flavored-ruby.html#code-title_helper">Listado&nbsp;4.2</a>. Hacemos esto creando el directorio <code>spec/support</code> y el archivo  <code>utilities.rb</code> para las utilidades RSpec (<a class="ref" href="filling-in-the-layout.html#code-rspec_utilities">Listado&nbsp;5.29</a>).</p>

<div class="label" id="code-rspec_utilities"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.29.</span> <span class="description">Un archivo para la utilidades RSpec con la función <code>full_title</code>. <br /> <code>spec/support/utilities.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">full_title</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
  <span class="n">base_title</span> <span class="o">=</span> <span class="s2">&quot;Ruby on Rails Tutorial Sample App&quot;</span>
  <span class="k">if</span> <span class="n">page_title</span><span class="o">.</span><span class="n">empty?</span>
    <span class="n">base_title</span>
  <span class="k">else</span>
    <span class="s2">&quot;</span><span class="si">#{</span><span class="n">base_title</span><span class="si">}</span><span class="s2"> | </span><span class="si">#{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Por supuesto, esto es esencialmente un duplicado del ayudante en el <a class="ref" href="rails-flavored-ruby.html#code-title_helper">Listado&nbsp;4.2</a>, pero teniendo dos métodos independientes nos permite capturar cualquier error de sintaxis en el titulo base. Este es un diseño dudoso, pero, una mejor forma de hacerlo (un poco mas avanzada), el cual pone a prueba el ayudante <code>full_title</code> original directamente, aparece en los ejercicios de la (<a class="ref" href="filling-in-the-layout.html#sec-layout_exercises">Sección&nbsp;5.6</a>).</p>

<p>Los archivos en el directorio <code>spec/support</code> son automáticamente incluidos por RSpec, lo cual significa que podemos escribir las pruebas paa la pagina Inicial (Home) así:</p>

<div class="code"><div class="highlight"><pre>  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
</pre></div>
</div>


<p>Ahora podemos simplificar las pruebas para la pagina Ayuda (Help), Acerca de Nosotros (About), y la pagina de contacto usando los mismos métodos que se usaron para la pagina Home. Los resultados aparecen en el <a class="ref" href="filling-in-the-layout.html#code-pretty_page_tests">Listado&nbsp;5.30</a>.</p>

<div class="label" id="code-pretty_page_tests"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.30.</span> <span class="description">Pruebas mas bonitas (Pretty) para las paginas estáticas. <br /> <code>spec/requests/static_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;Static pages&quot;</span> <span class="k">do</span>

  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sample App&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Help page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">help_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Help&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;Help&#39;</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;About page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">about_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;About&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;About Us&#39;</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Contact page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">contact_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Contact&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;Contact&#39;</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Ahora deberías de verificar que las pruebas aun pasan:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div>
</div>


<p>Este estilo RSpec en el <a class="ref" href="filling-in-the-layout.html#code-pretty_page_tests">Listado&nbsp;5.30</a> es mas bonito que el estilo en el <a class="ref" href="filling-in-the-layout.html#code-route_tests">Listado&nbsp;5.23</a>&mdash;en efecto, se puede hacer aun mas bonito (<a class="ref" href="filling-in-the-layout.html#sec-layout_exercises">Sección&nbsp;5.6</a>). Usaremos este estilo mas compacto cuando sea posible al desarrollar el resto de la aplicación muestra.</p>

<div class="label" id="sec-user_signup"></div>


<h2><a id="sec-5_4" href="filling-in-the-layout.html#sec-user_signup" class="heading"><span class="number">5.4</span> El registro de usuarios: Un primer paso</a></h2>


<p>Como cierre a nuestro trabajo de esquema y enrutamiento, en esta sección haremos una ruta para la pagina de registro (signup), lo cual significa crear un segundo controlador. Este es un primer paso importante hacia permitir que los usuarios se registren a nuestro sitio; tomaremos el siguiente paso, modelar usuarios, en el <a class="ref" href="modeling-users.html#top">Capítulo&nbsp;6</a>, y terminaremos el trabajo en el <a class="ref" href="sign-up.html#top">Capítulo&nbsp;7</a>.</p>

<div class="label" id="sec-users_controller"></div>


<h3><a id="sec-5_4_1" href="filling-in-the-layout.html#sec-users_controller" class="heading"><span class="number">5.4.1</span> Controlador de usuarios</a></h3>


<p>Ah pasado ya algo de tiempo desde que creamos nuestro primer contolador, el controlador StaticPages, ya hace desde la<a class="ref" href="static-pages.html#sec-static_pages">Sección&nbsp;3.1</a>. Es tiempo de crear un segundo, el controlador de Usuarios (Users Controller). Como antes, usaremos <code>generate</code> para crear el controlador mas simple que satisfaga nuestra necesidad del momento, mas específicamente, uno que tenga un '#' temporalmente en lugar de la pagina de registro de nuevos usuarios. Al seguir la arquitectura <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST architecture</a> convencional favorecida por Rails, llamaremos la acción  <code>new</code> a cual nuevos usuarios pasaran como argumento a <code>generate controller</code> y así crea el controlador de usuarios automáticamente (<a class="ref" href="filling-in-the-layout.html#code-generate_users_controller">Listado&nbsp;5.31</a>).</p>

<div class="label" id="code-generate_users_controller"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.31.</span> <span class="description">Generando un controlador de Usuarios (con la accion <code>new</code>).</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate controller Users new --no-test-framework
<span class="go">      create  app/controllers/users_controller.rb</span>
<span class="go">       route  get &quot;users/new&quot;</span>
<span class="go">      invoke  erb</span>
<span class="go">      create    app/views/users</span>
<span class="go">      create    app/views/users/new.html.erb</span>
<span class="go">      invoke  helper</span>
<span class="go">      create    app/helpers/users_helper.rb</span>
<span class="go">      invoke  assets</span>
<span class="go">      invoke    coffee</span>
<span class="go">      create      app/assets/javascripts/users.js.coffee</span>
<span class="go">      invoke    scss</span>
<span class="go">      create      app/assets/stylesheets/users.css.scss</span>
</pre></div>
</div></div>


<p>Esto crea un controlador de Usuarios (User controller) con la acción <code>new</code> (<a class="ref" href="filling-in-the-layout.html#code-initial_users_controller">Listado&nbsp;5.32</a>) y el '#' en lugar de la vista de usuario (<a class="ref" href="filling-in-the-layout.html#code-initial_new_action">Listado&nbsp;5.33</a>).</p>

<div class="label" id="code-initial_users_controller"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.32.</span> <span class="description">The initial Users controller, with a <code>new</code> action. <br /> <code>app/controllers/users_controller.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">new</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-initial_new_action"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.33.</span> <span class="description">La vista<code>new</code> inicial para Usuarios. <br /> <code>app/views/users/new.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Users#new<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Find me in app/views/users/new.html.erb<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div></div>




<div class="label" id="sec-signup_url"></div>


<h3><a id="sec-5_4_2" href="filling-in-the-layout.html#sec-signup_url" class="heading"><span class="number">5.4.2</span> El URL para la pagina de registro</a></h3>


<p>Con el código de la <a class="ref" href="filling-in-the-layout.html#sec-users_controller">Sección&nbsp;5.4.1</a>, ya tenemos una pagina funcionando para nuevos usuarios /users/new, pero recuerda que debido a la  <a class="ref" href="filling-in-the-layout.html#table-url_mapping">Tabla&nbsp;5.1</a> queremos que el URL sea mejor /signup. Como en la <a class="ref" href="filling-in-the-layout.html#sec-layout_links">Sección&nbsp;5.3</a>, primero escribiremos algunas pruebas de integración, los cuales ahora generaremos:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate integration_test user_pages
</pre></div>
</div>


<p>Después, siguiendo las especificaciones del modelo de las paginas estáticas (static pages spec) en el <a class="ref" href="filling-in-the-layout.html#code-pretty_page_tests">Listado&nbsp;5.30</a>, remplazaremos las pruebas de las paginas de usuario con código para poner en prueba  el contenido de las etiquetas<code>h1</code> y <code>title</code> como se muestran en el <a class="ref" href="filling-in-the-layout.html#code-user_pages_spec">Listado&nbsp;5.34</a>.</p>

<div class="label" id="code-user_pages_spec"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.34.</span> <span class="description">Las especificaciones iniciales para usuarios, con la prueba para la pagina de registro (signup page). <br /> <code>spec/requests/user_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;User pages&quot;</span> <span class="k">do</span>

  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">&quot;signup page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">signup_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">&#39;Sign up&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;Sign up&#39;</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Podemos ejecutar estas pruebas usando el comando rspec usual:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/user_pages_spec.rb
</pre></div>
</div>


<p>Cabe mencionar que también podemos ejecutar todas las especificaciones (specs) de la solicitud (request) pasando todo el directorio en vez de un solo archivo:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/
</pre></div>
</div>


<p>Basado en este patrón, puede que adivines como ejecutar <em>todas</em> las especificaciones (specs):</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/
</pre></div>
</div>


<p>Para ser mas completos, usualmente usaremos este método para ejecutar las pruebas por el resto del tutotial. Por cierto, cabe mencionar (ya que tal vez veas otra gente usando esto) que también se puede ejecutar el conjunto de pruebas usando la tarea (task)  <code>spec</code>  de Rake:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rake spec
</pre></div>
</div>


<p>(De hecho solo necesitas teclar <code>rake</code> por si solo, el comportamiento standard de <code>rake</code> es ejecutar el conjunto de pruebas.) La única advertencia al usar <code>rake</code> para ejecutar las pruebas de la aplicación muestra actual capturara un error ya que requiere que la base de datos prueba sea apropiadamente preparada, un paso que esperara hasta la <a class="ref" href="modeling-users.html#sec-initial_user_tests">Sección&nbsp;6.2.1</a>.</p>

<p>Al construir el controlador de Usuarios (User Controller) ya contiene la acción <code>new</code>, así que para hacer que la prueba pase todo lo que se necesita es una ruta y vista de contenido adecuadas. Seguiremos el ejemplo del <a class="ref" href="filling-in-the-layout.html#code-static_page_routes">Listado&nbsp;5.24</a> y agregaremos la regla <code>match &rsquo;/signup&rsquo;</code> para el URL de signup (registro) (<a class="ref" href="filling-in-the-layout.html#code-signup_route">Listado&nbsp;5.35</a>).</p>

<div class="label" id="code-signup_route"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.35.</span> <span class="description">Una ruta para la pagina de registro (signup). <br /> <code>config/routes.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="ss">SampleApp::Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">&quot;users/new&quot;</span>

  <span class="n">root</span>  <span class="s1">&#39;static_pages#home&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/signup&#39;</span><span class="p">,</span>  <span class="ss">to:</span> <span class="s1">&#39;users#new&#39;</span><span class="p">,</span>            <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">to:</span> <span class="s1">&#39;static_pages#help&#39;</span><span class="p">,</span>    <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">to:</span> <span class="s1">&#39;static_pages#about&#39;</span><span class="p">,</span>   <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">to:</span> <span class="s1">&#39;static_pages#contact&#39;</span><span class="p">,</span> <span class="ss">via:</span> <span class="s1">&#39;get&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Observa que nos quedamos con la regla <code>get "users/new"</code>,  la cual due generada automaticamente por la generation del controlador de Usuarios en el <a class="ref" href="filling-in-the-layout.html#code-generate_users_controller">Listado&nbsp;5.31</a>. Actualmente, esta regla es necesaria para que el enrutamiento <code>&rsquo;users/new&rsquo;</code> funcione, pero no sigue los convenios apropiados de REST (<a class="ref" href="a-demo-app.html#table-demo_RESTful_users">Tabla&nbsp;2.2</a>), y la eliminaremos en la <a class="ref" href="sign-up.html#sec-a_users_resource">Sección&nbsp;7.1.2</a>.</p>

<p>Para hacer que las pruebas pasen, todo lo que ahora necesitamos es una vista con el titulo y encabezamiento con el texto &ldquo;Sign up&rdquo; (<a class="ref" href="filling-in-the-layout.html#code-initial_signup_page">Listado&nbsp;5.36</a>).</p>

<div class="label" id="code-initial_signup_page"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.36.</span> <span class="description">La pagina de registro (signup) sin completar. <br /> <code>app/views/users/new.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">provide</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="s1">&#39;Sign up&#39;</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;h1&gt;</span>Sign up<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Find me in app/views/users/new.html.erb<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div></div>


<p>Por ahora, la prueba para la pagina de registro (signup page) en el <a class="ref" href="filling-in-the-layout.html#code-user_pages_spec">Listado&nbsp;5.34</a> deberían pasar. Todo lo que queda es agregar el enlace apropriado al button de la pagina Inicial (Home page). Como con las otras rutas, <code>match &rsquo;/signup&rsquo;</code> nos da la ruta nombrada <code>signup_path</code>, a la cual daremos uso en el <a class="ref" href="filling-in-the-layout.html#code-home_page_signup_link">Listado&nbsp;5.37</a>.</p>

<div class="label" id="code-home_page_signup_link"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.37.</span> <span class="description">Poniendo un enlace al boton y asi vincularlo la pagina de Registro. <br /> <code>app/views/static_pages/home.html.erb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;center hero-unit&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Welcome to the Sample App<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;h2&gt;</span>
    This is the home page for the
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Ruby on Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    sample application.
  <span class="nt">&lt;/h2&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign up now!&quot;</span><span class="p">,</span> <span class="n">signup_path</span><span class="p">,</span> <span class="ss">class:</span> <span class="s2">&quot;btn btn-large btn-primary&quot;</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;rails.png&quot;</span><span class="p">,</span> <span class="ss">alt:</span> <span class="s2">&quot;Rails&quot;</span><span class="p">),</span> <span class="s1">&#39;http://rubyonrails.org/&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>Con esto, ya terminamos con los enlaces y las rutas nombradas, siquiera hasta que agreguemos una ruta para ingresar a al sitio (<a class="ref" href="sign-in-sign-out.html#top">Capítulo&nbsp;8</a>). La pagina para nuevos usuarios que resulta (at the URL /signup) aparece en la <a class="ref" href="filling-in-the-layout.html#fig-new_signup_page">Figura&nbsp;5.9</a>.</p>

<div class="label" id="fig-new_signup_page"></div>


<div class="Figura"><div class="center"><span class="graphic"><img src="images/Figuras/new_signup_page_bootstrap.png" alt="new_signup_page_bootstrap" /></span></div><div class="caption"><span class="header">Figura 5.9: </span><span class="description">La pagina nueva para ingresar al sitio en /signup. <a href="http://localhost:3000/signup">/signup</a>.&nbsp;<a href="http://railstutorial.org/images/Figuras/new_signup_page_bootstrap-full.png">(Tamaño Total)</a></span></div></div>


<p>Ahora las pruebas deberían de pasar:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/
</pre></div>
</div>




<div class="label" id="sec-layout_conclusion"></div>


<h2><a id="sec-5_5" href="filling-in-the-layout.html#sec-layout_conclusion" class="heading"><span class="number">5.5</span> Conclusion</a></h2>


<p>En este Capítulo, hemos esculpido el esquema de nuestra aplicación y pulido la rutas. El resto del libro será dedicado a dar contenido a la aplicación muestra: primero, agregando usuarios que puedan registrarse, ingresar y finalizar su sesión (log out); luego, agregando microposts; y, finalmente, agregando la habilidad para seguir a otros usuarios.</p>

<p>Si has estado usando Git, deverias de unir (merge) los cambios a la rama maestra (master branch):</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git add .
<span class="gp">$</span> git commit -m <span class="s2">&quot;Finish layout and routes&quot;</span>
<span class="gp">$</span> git checkout master
<span class="gp">$</span> git merge filling-in-layout
</pre></div>
</div>


<p>También puedes hacer subir (push) a GitHub:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
</pre></div>
</div>


<p>Finalmente, puedes desplegar (deploy) a heroku:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push heroku
</pre></div>
</div>


<p>El resultados debería ser que la aplicación muestra este funcionando en el servidor de producción:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku open
</pre></div>
</div>


<p>Si tienes problemas intenta ejecutar</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku logs
</pre></div>
</div>


<p>para quitar el error usando Heroku logfile.</p>

<div class="label" id="sec-layout_exercises"></div>


<h2><a id="sec-5_6" href="filling-in-the-layout.html#sec-layout_exercises" class="heading"><span class="number">5.6</span> Ejercicios</a></h2>




<ol>

<li>Vimos en la <a class="ref" href="filling-in-the-layout.html#sec-layout_links">Sección&nbsp;5.3</a> que el matcher de RSpec <code>have_content</code> aveces hace pares de forma <em>demaciado</em> general, haciendo que temporalmente agreguemos comentarios a la linea "Contact" en el pie de pagina para evadir un falso positivo en la prueba (<a class="ref" href="filling-in-the-layout.html#code-comment_out_footer">Listado&nbsp;5.18</a>). Para arreglar esto, el <a class="ref" href="filling-in-the-layout.html#code-contact_test_have_selector">Listado&nbsp;5.38</a> presenta el metodo<code>have_selector</code> de Capybara, el cual nos permite poner a prueba si existe la presencia de ciertas etiquetas HTML en especifico. Al borrar y luego restaurar la linea &ldquo;Contact&rdquo; <code>h1</code> en el <a class="ref" href="filling-in-the-layout.html#code-contact_view">Listado&nbsp;5.21</a>,
verifica que el codigo en el <a class="ref" href="filling-in-the-layout.html#code-contact_test_have_selector">Listado&nbsp;5.38</a> correctamente falla aun cuando el pie de pagina no tiene comentarios.</li>

<li>El código en el <a class="ref" href="filling-in-the-layout.html#code-pretty_page_tests">Listado&nbsp;5.30</a> para poner en prueba las paginas estáticas es compacto pero aun algo repetitivo. funciona con una facilidad (facility) llamada <em>shared examples</em> para eliminar esa forma de duplicación. Al seguir el ejemplo en el <a class="ref" href="filling-in-the-layout.html#code-static_pages_spec_shared_example">Listado&nbsp;5.39</a>, para eliminar esa forma de duplicación. Al seguir el ejemplo en el Listado 5.39, se agregan las pruebas que hacen falta para la paginas de Ayuda, Acerca de Nosotros, y la de Contacto. Cebe mencionar que el comando <code>let</code>, que se presento brevemente en el <a class="ref" href="static-pages.html#code-pages_controller_spec_exercise">Listado&nbsp;3.31</a>, crea un variable local con valor (value) en demanda (en otras palabras que un valor se esta usando), en contraste de un valor instantáneo, el cual fue creado al asignar. (<a
class="ref" href="filling-in-the-layout.html#code-static_pages_spec_shared_example">Listado&nbsp;5.39</a> también incorpora el uso de <code>have_selector</code> del <a class="ref" href="filling-in-the-layout.html#code-contact_test_have_selector">Listado&nbsp;5.38</a>.)</li>

<li>Puede que hayas observado que nuestras pruebas para los enlaces del esquema ponen en prueba el enrutamiento pero no verifica en realidad si los enlaces vam a las paginas correctas. Una forma de implementar estas pruebas es usar <code>visit</code> y <code>click_link</code> dentro de la prueba de la intagracion RSpec. Completa el codigo en el <a class="ref" href="filling-in-the-layout.html#code-layout_links_test">Listado&nbsp;5.40</a> para verificar que todos los enlaces del esquema estan definidos apropriadamente.
</li>

<li>Elimina la necesidad de usar el ayudante <code>full_title</code> en el <a class="ref" href="filling-in-the-layout.html#code-rspec_utilities">Listado&nbsp;5.29</a> escribiendo pruebas para el ayudante de metodo original, como se muestra en el <a class="ref" href="filling-in-the-layout.html#code-full_title_helper_tests">Listado&nbsp;5.41</a>. (Necesitaras crear el directorio <code>spec/helpers</code> y el archivo <code>application_helper_spec.rb</code>.) Después, usa <code>include</code> en la prueba usando el codigo en el <a class="ref" href="filling-in-the-layout.html#code-rspec_utilities_simplified">Listado&nbsp;5.42</a>.  Verifica que el codigo aun sea valido ejecutando el conjunto de pruebas. <em>Aviso</em>: El <a class="ref" href="filling-in-the-layout.html#code-full_title_helper_tests">Listado&nbsp;5.41</a> usa <em>regular expressions</em>, acerca de las cuales aprenderemos mas en la <a class="ref" href="modeling-users.html#sec-format_validation">Sección&nbsp;6.2.4</a>. (Gracias a <a href="http://alexchaffee.com/">Alex Chaffee</a> por la sugerencia de usar ese codigo en este ejercicio.)</li>

</ol>




<div class="label" id="code-contact_test_have_selector"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.38.</span> <span class="description">Una prueba mas especifica para la pagina de Contacto. <br /> <code>spec/requests/static_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;Static pages&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">describe</span> <span class="s2">&quot;Contact page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">contact_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">,</span> <span class="ss">text:</span> <span class="s1">&#39;Contact&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;Contact&#39;</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-static_pages_spec_shared_example"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.39.</span> <span class="description">Usando un RSpec shared example (ejemplo compartido) para eliminar la duplicacion de pruebas. <br /> <code>spec/requests/static_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;Static pages&quot;</span> <span class="k">do</span>

  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">shared_examples_for</span> <span class="s2">&quot;all static pages&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">,</span> <span class="ss">text:</span> <span class="n">heading</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="n">page_title</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Home page&quot;</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:heading</span><span class="p">)</span>    <span class="p">{</span> <span class="s1">&#39;Sample App&#39;</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:page_title</span><span class="p">)</span> <span class="p">{</span> <span class="s1">&#39;&#39;</span> <span class="p">}</span>

    <span class="n">it_should_behave_like</span> <span class="s2">&quot;all static pages&quot;</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">&#39;| Home&#39;</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Help page&quot;</span> <span class="k">do</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;About page&quot;</span> <span class="k">do</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">&quot;Contact page&quot;</span> <span class="k">do</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-layout_links_test"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.40.</span> <span class="description">Una prueba para los enlaces en el esquema. <br /> <code>spec/requests/static_pages_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;Static pages&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">it</span> <span class="s2">&quot;should have the right links on the layout&quot;</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">click_link</span> <span class="s2">&quot;About&quot;</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">&#39;About Us&#39;</span><span class="p">))</span>
    <span class="n">click_link</span> <span class="s2">&quot;Help&quot;</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Contact&quot;</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Home&quot;</span>
    <span class="n">click_link</span> <span class="s2">&quot;Sign up now!&quot;</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;sample app&quot;</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-full_title_helper_tests"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.41.</span> <span class="description">Las pruebas para el ayudante <code>full_title</code>. <br /> <code>spec/helpers/application_helper_spec.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="no">ApplicationHelper</span> <span class="k">do</span>

  <span class="n">describe</span> <span class="s2">&quot;full_title&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">&quot;should include the page title&quot;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/foo/</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should include the base title&quot;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^Ruby on Rails Tutorial Sample App/</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should not include a bar for the home page&quot;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">not_to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/\|/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code-rspec_utilities_simplified"></div>


<div class="codeListado">
<div class="Listado"><span class="header">Listado 5.42.</span> <span class="description">Remplazando el ayudante de prueba <code>full_title</code> con un simple <code>include</code>. <br /> <code>spec/support/utilities.rb</code></span> </div>
<div class="code"><div class="highlight"><pre><span class="kp">include</span> <span class="no">ApplicationHelper</span>
</pre></div>
</div></div>




<div class="navigation">  <a class="prev_page" href="rails-flavored-ruby.html#top">
    &laquo;&nbsp;<span class="number">Capítulo 4</span> Ruby con sabor a Rails
  </a>
  <a class="next_page" href="modeling-users.html#top">
    <span class="number">Capítulo 6</span> Modelando usuarios&nbsp;&raquo;
  </a>
</div><div class="footnotes">
<ol>
<li id="fn-5_1">Gracias al lector <a href="https://twitter.com/colmtuite">Colm Tuite</a> por su excelente trabajo en ayudar a convertir la aplicación muestra a Bootstrap.&nbsp;<a class="arrow" href="#fnref-5_1">&uarr;</a></li>
<li id="fn-5_2">Las maquetas en el <em> Tutorial Ruby on Rails </em> fueron hechas con una excelente aplicación web llamada <a href="http://gomockingbird.com">Mockingbird</a>.&nbsp;<a class="arrow" href="#fnref-5_2">&uarr;</a></li>
<li id="fn-5_3">Estos dos no están relacionados con las clases de Ruby.&nbsp;<a class="arrow" href="#fnref-5_3">&uarr;</a></li>
<li id="fn-5_4">Puede que notaste que la etiqueta <code>img</code> no se parece a <tt class="verb">&lt;img&gt;...&lt;/img&gt;</tt>, si no que se parece a mas bien a <tt class="verb">&lt;img ... /&gt;</tt>. Las etiquetas que son de esta forma se les conocen como etiquetas auto-cierre (<em>self-closing</em>).&nbsp;<a class="arrow" href="#fnref-5_4">&uarr;</a></li>
<li id="fn-5_5">Es imposible usar LESS con el asset pipeline, ve la gema <a href="http://rubygems.org/gems/lss-rails-bootstrap"><tt>less-rails-bootstrap</tt> gem</a> para mas detalles.&nbsp;<a class="arrow" href="#fnref-5_5">&uarr;</a></li>
<li id="fn-5_6">Muchos de los desarrolladores de Rails usan el directorio <code>shared</code> para los parciales compartidos por diferentes vistas. Yo prefiero usar el folder <code>shared</code> para los parciales de utilidad (utility partials) que funcionan con multiples vistas, y poner los parciales que literalmente estan en cada pagina (como parte del esquema) en el directorio <code>layouts</code>. (Crearemos el directorio <code>shared</code> directory starting in <a class="ref" href="sign-up.html#top">Capítulo&nbsp;7</a>.) empezando el Capítulo 7.) Esto parece una division logica, pero igual poniendolos en el folder <code>shared</code> ciertamente funciona bien, igual.&nbsp;<a class="arrow" href="#fnref-5_6">&uarr;</a></li>
<li id="fn-5_7">Puede que te preguntes porque usamos la etiqueta <code>footer</code> y la clase <code>.footer</code>. La respuesta es que la etiqueta tiene un significado claro para la lectores humanos, y porque la clase es usada por Bootstrap. Al usar la etiqueta <code>div</code> en vez de <code>footer</code> funcionaria tambien.&nbsp;<a class="arrow" href="#fnref-5_7">&uarr;</a></li>
<li id="fn-5_8">La estructura de esta sección esta basada en el excelente blog <a href="http://2beards.net/2011/11/the-rails-3-asset-pipeline-in-about-5-minutes/">The Rails 3 Asset Pipeline in (about) 5 Minutes</a> de Michael Erasmus. para mas detalles ve <a href="http://guides.rubyonrails.org/asset_pipeline.html">Rails Guide on the Asset Pipeline</a>.&nbsp;<a class="arrow" href="#fnref-5_8">&uarr;</a></li>
<li id="fn-5_9">El formato anterior de <code>.sass</code> con cual Sass aun funciona, define un nuevo lenguaje que es menos verboso (y que tiene menos "{}") pero es menos cómodo para proyectos ya existentes y es difícil aprender con aquellos que ya están familiarizados con CSS.&nbsp;<a class="arrow" href="#fnref-5_9">&uarr;</a></li>
</ol>
</div>




</div>
  </body>
</html>